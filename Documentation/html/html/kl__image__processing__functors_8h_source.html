<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>klImageCore: kl_image_processing_functors.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>kl_image_processing_functors.h</h1>  </div>
</div>
<div class="contents">
<a href="kl__image__processing__functors_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) &lt;2007&gt;, &lt;Bruce Campbell&gt; All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  *  </span>
<a name="l00003"></a>00003 <span class="comment"> * Bruce B Campbell 11 30 2012  *</span>
<a name="l00004"></a>00004 <span class="comment"> ********************************/</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 
<a name="l00007"></a>00007 <span class="preprocessor">#ifndef KL_IMAGE_FUNCTOR_H</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#define KL_IMAGE_FUNCTOR_H</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;<a class="code" href="kl__image__buffer_8h.html">kl_image_buffer.h</a>&quot;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="comment">//ppm_helper include</span>
<a name="l00013"></a>00013 <span class="comment">//#include &quot;ppm_helper.h&quot;  Used for debugging below</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 
<a name="l00016"></a><a class="code" href="classkl_copy_functor.html">00016</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> TYPE&gt; <span class="keyword">class </span><a class="code" href="classkl_copy_functor.html">klCopyFunctor</a>{
<a name="l00017"></a>00017 <span class="keyword">public</span>:
<a name="l00018"></a>00018 
<a name="l00019"></a>00019     <span class="comment">//Default for band parameter copies all bands, otherwise parameter indicates the desired band</span>
<a name="l00020"></a>00020     <span class="comment">//band is a 0-based index.</span>
<a name="l00021"></a><a class="code" href="classkl_copy_functor.html#a8fc61c755229b16a6360852102ae7b66">00021</a>     <a class="code" href="classkl_copy_functor.html#a8fc61c755229b16a6360852102ae7b66">klCopyFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst, <span class="keywordtype">int</span> lband=-1)
<a name="l00022"></a>00022         : <a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>(lsrc), <a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>(ldst), <a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">band</a>(lband)
<a name="l00023"></a>00023     {
<a name="l00024"></a>00024 
<a name="l00025"></a>00025     }
<a name="l00026"></a><a class="code" href="classkl_copy_functor.html#a825241614cb5aa063df78c6f5862d892">00026</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_copy_functor.html#a825241614cb5aa063df78c6f5862d892">operator()</a>(<span class="keywordtype">void</span>)
<a name="l00027"></a>00027     {
<a name="l00028"></a>00028         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>-&gt;numBands();
<a name="l00029"></a>00029         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>-&gt;width();
<a name="l00030"></a>00030         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>-&gt;height(); 
<a name="l00031"></a>00031         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>-&gt;bandStride();
<a name="l00032"></a>00032         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>-&gt;xStride();
<a name="l00033"></a>00033         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>-&gt;yStride();
<a name="l00034"></a>00034 
<a name="l00035"></a>00035         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>-&gt;numBands();
<a name="l00036"></a>00036         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>-&gt;width();
<a name="l00037"></a>00037         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>-&gt;height(); 
<a name="l00038"></a>00038         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>-&gt;bandStride();
<a name="l00039"></a>00039         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>-&gt;xStride();
<a name="l00040"></a>00040         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>-&gt;yStride();
<a name="l00041"></a>00041 
<a name="l00042"></a>00042         <span class="keywordflow">if</span>((<a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">band</a>&gt;0)&amp;&amp; (<a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">band</a>&gt;inbands))
<a name="l00043"></a>00043             <span class="keywordflow">throw</span> <span class="stringliteral">&quot; : CopyFunctor: invalid band specified.&quot;</span>;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l00046"></a>00046         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;
<a name="l00047"></a>00047         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049         TYPE* inbuf=(TYPE*)<a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>-&gt;buffer();
<a name="l00050"></a>00050 
<a name="l00051"></a>00051         TYPE* outbuf=(TYPE*)<a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>-&gt;buffer();
<a name="l00052"></a>00052 
<a name="l00053"></a>00053         <span class="keywordtype">unsigned</span> typeSize=<span class="keyword">sizeof</span>(TYPE);
<a name="l00054"></a>00054         <span class="keywordtype">unsigned</span> inyOffset=inyStride/typeSize;
<a name="l00055"></a>00055         <span class="keywordtype">unsigned</span> inxOffset=inxStride/typeSize;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057         <span class="keywordtype">unsigned</span> outyOffset=outyStride/typeSize;
<a name="l00058"></a>00058         <span class="keywordtype">unsigned</span> outxOffset=outxStride/typeSize;
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         <span class="keywordflow">if</span>(<a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">band</a>==-1) <span class="comment">//do all bands</span>
<a name="l00061"></a>00061         {
<a name="l00062"></a>00062             <span class="keywordflow">if</span>(inbands!=outbands || inwidth!=outwidth || inheight!=outheight)
<a name="l00063"></a>00063                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: CopyFunctor : in and out dimensions need to be the same for default copy.&quot;</span>;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065             <span class="keywordflow">for</span> (i=0; i&lt;inheight; i++)
<a name="l00066"></a>00066             {
<a name="l00067"></a>00067                 <span class="keywordflow">for</span> (j=0; j&lt;inwidth; j++)
<a name="l00068"></a>00068                 {
<a name="l00069"></a>00069                     <span class="keywordflow">for</span>(b=0;b&lt;inbands;b++)
<a name="l00070"></a>00070                     {
<a name="l00071"></a>00071                         *(outbuf+i*outyOffset + j*outxOffset +b)=*(inbuf+i*inyOffset+j*inxOffset+b);
<a name="l00072"></a>00072                     }
<a name="l00073"></a>00073                 }
<a name="l00074"></a>00074             }
<a name="l00075"></a>00075         }
<a name="l00076"></a>00076         <span class="keywordflow">else</span>
<a name="l00077"></a>00077         {
<a name="l00078"></a>00078             <span class="keywordflow">if</span>(outbands!=1 || inwidth!=outwidth || inheight!=outheight)
<a name="l00079"></a>00079                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: CopyFunctor : out bands needs to be one and in and out dimensions need to be the same for band copy.&quot;</span>;
<a name="l00080"></a>00080 
<a name="l00081"></a>00081             <span class="keywordflow">if</span>(<a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">band</a>&gt;inbands)
<a name="l00082"></a>00082                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: CopyFunctor : invalid copy band specified.&quot;</span>;
<a name="l00083"></a>00083 
<a name="l00084"></a>00084             <span class="keywordflow">for</span> (i=0; i&lt;inheight; i++)
<a name="l00085"></a>00085             {
<a name="l00086"></a>00086                 <span class="keywordflow">for</span> (j=0; j&lt;inwidth; j++)
<a name="l00087"></a>00087                 {
<a name="l00088"></a>00088                     *(outbuf+i*outyOffset + j*outxOffset)=*(inbuf+i*inyOffset+j*inxOffset+<a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">band</a>);
<a name="l00089"></a>00089 
<a name="l00090"></a>00090                 }
<a name="l00091"></a>00091             }
<a name="l00092"></a>00092         }
<a name="l00093"></a>00093     }
<a name="l00094"></a>00094 <span class="keyword">protected</span>:
<a name="l00095"></a>00095 
<a name="l00096"></a><a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">00096</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_copy_functor.html#ab37fa7f8e12444db18db16122a209359">src</a>;
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">00098</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_copy_functor.html#aeb863ec4d7d69342216fcace2a80da22">dst</a>;
<a name="l00099"></a>00099 
<a name="l00100"></a><a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">00100</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_copy_functor.html#af0bb5a77a6a290c11e564fcede7502f6">band</a>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 };
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="classkl_type_convert_functor.html">00104</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> TYPE_in,<span class="keyword">class</span> TYPE_out&gt; <span class="keyword">class </span><a class="code" href="classkl_type_convert_functor.html">klTypeConvertFunctor</a>{
<a name="l00105"></a>00105 <span class="keyword">public</span>:
<a name="l00106"></a>00106     <span class="comment">//Auto-scaling for floating point output assumes a 0,1 range is desired for min and max of the data.</span>
<a name="l00107"></a>00107     <span class="comment">//The min and max of the input is found by iterating over input data.  Other caveats apply.  See the implementation for details.</span>
<a name="l00108"></a><a class="code" href="classkl_type_convert_functor.html#af2e9f49384185135aab5127ff8039382">00108</a>     <a class="code" href="classkl_type_convert_functor.html#af2e9f49384185135aab5127ff8039382">klTypeConvertFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst, <span class="keywordtype">bool</span> ldoScaling=<span class="keyword">false</span>,
<a name="l00109"></a>00109         TYPE_in linmin=0,TYPE_in linmax=0,
<a name="l00110"></a>00110         TYPE_out loutmin=0,TYPE_out loutmax=0)
<a name="l00111"></a>00111         : <a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>(lsrc), <a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>(ldst), <a class="code" href="classkl_type_convert_functor.html#a745af9e977ebfe9ac08294103eb68d89">doScaling</a>(ldoScaling), <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>(linmin), <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>(linmax), <a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>(loutmin), <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>(loutmax)  
<a name="l00112"></a>00112     {
<a name="l00113"></a>00113 
<a name="l00114"></a>00114     }
<a name="l00115"></a>00115 
<a name="l00116"></a><a class="code" href="classkl_type_convert_functor.html#ae86ffe290a5f14ea3d0d4d32df8a1f0b">00116</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_type_convert_functor.html#ae86ffe290a5f14ea3d0d4d32df8a1f0b">operator()</a>(<span class="keywordtype">void</span>)
<a name="l00117"></a>00117     {
<a name="l00118"></a>00118         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>-&gt;numBands();
<a name="l00119"></a>00119         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>-&gt;width();
<a name="l00120"></a>00120         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>-&gt;height(); 
<a name="l00121"></a>00121         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>-&gt;bandStride();
<a name="l00122"></a>00122         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>-&gt;xStride();
<a name="l00123"></a>00123         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>-&gt;yStride();
<a name="l00124"></a>00124 
<a name="l00125"></a>00125         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>-&gt;numBands();
<a name="l00126"></a>00126         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>-&gt;width();
<a name="l00127"></a>00127         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>-&gt;height(); 
<a name="l00128"></a>00128         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>-&gt;bandStride();
<a name="l00129"></a>00129         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>-&gt;xStride();
<a name="l00130"></a>00130         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>-&gt;yStride();
<a name="l00131"></a>00131 
<a name="l00132"></a>00132         <span class="keywordflow">if</span>(inbands != outbands)
<a name="l00133"></a>00133             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klTypeConvertFunctor: TypeConvertFunctor: in and out bands must be the same.&quot;</span>;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135         <span class="keywordflow">if</span>(inwidth!=outwidth || inheight != outheight)
<a name="l00136"></a>00136             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klTypeConvertFunctor: TypeConvertFunctor: in and out  dimensions must be the same&quot;</span>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138         <span class="keywordtype">size_t</span> inBytes=inxStride/inbands;
<a name="l00139"></a>00139         <span class="keywordtype">size_t</span> outBytes=outxStride/outbands;
<a name="l00140"></a>00140 
<a name="l00141"></a>00141         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l00142"></a>00142         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;
<a name="l00143"></a>00143         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b;
<a name="l00144"></a>00144         TYPE_in* inbuf=(TYPE_in*)<a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>-&gt;buffer();
<a name="l00145"></a>00145         TYPE_out* outbuf=(TYPE_out*)<a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>-&gt;buffer();
<a name="l00146"></a>00146 
<a name="l00147"></a>00147         <span class="keywordflow">if</span>(<a class="code" href="classkl_type_convert_functor.html#a745af9e977ebfe9ac08294103eb68d89">doScaling</a>)
<a name="l00148"></a>00148         {
<a name="l00149"></a>00149             <span class="keywordtype">double</span> tmin=DBL_MAX;
<a name="l00150"></a>00150             <span class="keywordtype">double</span> tmax=-1.7976931348623e+306;<span class="comment">//close to -DBL_MAX</span>
<a name="l00151"></a>00151             <span class="keywordflow">for</span> (i=0; i&lt;outheight; i++)
<a name="l00152"></a>00152             {
<a name="l00153"></a>00153                 <span class="keywordflow">for</span> (j=0; j&lt;outwidth; j++)
<a name="l00154"></a>00154                 {
<a name="l00155"></a>00155                     <span class="keywordflow">for</span>(b=0;b&lt;outbands;b++)
<a name="l00156"></a>00156                     {
<a name="l00157"></a>00157 
<a name="l00158"></a>00158                         TYPE_in in=*(inbuf+ i*inwidth + j*inbands + b);
<a name="l00159"></a>00159                         <span class="keywordflow">if</span>(in&lt;tmin)
<a name="l00160"></a>00160                             tmin=in;
<a name="l00161"></a>00161                         <span class="keywordflow">if</span>(in&gt;tmax)
<a name="l00162"></a>00162                             tmax=in;
<a name="l00163"></a>00163 
<a name="l00164"></a>00164                     }
<a name="l00165"></a>00165                 }
<a name="l00166"></a>00166             }
<a name="l00167"></a>00167             <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>=(TYPE_in)tmin;
<a name="l00168"></a>00168             <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=(TYPE_in)tmax;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170             <span class="keywordflow">switch</span>(<span class="keyword">sizeof</span>(TYPE_out) )
<a name="l00171"></a>00171             {
<a name="l00172"></a>00172             <span class="keywordflow">case</span> 1:
<a name="l00173"></a>00173                 {
<a name="l00174"></a>00174                     <a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>=0;
<a name="l00175"></a>00175                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_out)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char) )
<a name="l00176"></a>00176                     {
<a name="l00177"></a>00177                         <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>=UCHAR_MAX;
<a name="l00178"></a>00178                     }
<a name="l00179"></a>00179                     <span class="keywordflow">else</span>
<a name="l00180"></a>00180                         <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>=SCHAR_MAX;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182                     <span class="keywordflow">break</span>;
<a name="l00183"></a>00183                 }
<a name="l00184"></a>00184             <span class="keywordflow">case</span> 2:
<a name="l00185"></a>00185                 {
<a name="l00186"></a>00186                     <a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>=0;
<a name="l00187"></a>00187                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_out)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> short) )
<a name="l00188"></a>00188                     {
<a name="l00189"></a>00189                         <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>=(TYPE_out)USHRT_MAX;
<a name="l00190"></a>00190                     }
<a name="l00191"></a>00191                     <span class="keywordflow">else</span>
<a name="l00192"></a>00192                         <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>=(TYPE_out)SHRT_MAX;
<a name="l00193"></a>00193                     <span class="keywordflow">break</span>;
<a name="l00194"></a>00194                 }
<a name="l00195"></a>00195             <span class="keywordflow">case</span> 4:
<a name="l00196"></a>00196                 {
<a name="l00197"></a>00197                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_out)==<span class="keyword">typeid</span>(float) )
<a name="l00198"></a>00198                     {
<a name="l00199"></a>00199                         <a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>=(TYPE_out)0.0;
<a name="l00200"></a>00200                         <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>=(TYPE_out)1.0;
<a name="l00201"></a>00201                     }
<a name="l00202"></a>00202                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_out)==<span class="keyword">typeid</span>(int) || <span class="keyword">typeid</span>(TYPE_out)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> int) )
<a name="l00203"></a>00203                     {
<a name="l00204"></a>00204                         <a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>=0;
<a name="l00205"></a>00205                     }
<a name="l00206"></a>00206                     <span class="keywordflow">break</span>;
<a name="l00207"></a>00207                 }
<a name="l00208"></a>00208             <span class="keywordflow">case</span> 8:
<a name="l00209"></a>00209                 {
<a name="l00210"></a>00210                     <a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>=(TYPE_out)0.0;
<a name="l00211"></a>00211                     <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>=(TYPE_out)1.0;
<a name="l00212"></a>00212                     <span class="keywordflow">break</span>;
<a name="l00213"></a>00213                 }
<a name="l00214"></a>00214             <span class="keywordflow">default</span>:
<a name="l00215"></a>00215                 {
<a name="l00216"></a>00216                     <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klTypeConvertFunctor  : scaling mode only applies for char, short, float, double output data types.&quot;</span>;
<a name="l00217"></a>00217                 }
<a name="l00218"></a>00218             }
<a name="l00219"></a>00219         }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221         <span class="keywordflow">if</span>(<a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>==<a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>)
<a name="l00222"></a>00222         {
<a name="l00223"></a>00223             <span class="keywordflow">switch</span>(<span class="keyword">sizeof</span>(TYPE_in) )
<a name="l00224"></a>00224             {
<a name="l00225"></a>00225             <span class="keywordflow">case</span> 1:
<a name="l00226"></a>00226                 {
<a name="l00227"></a>00227                     <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>=0;
<a name="l00228"></a>00228                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_in)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char) )
<a name="l00229"></a>00229                     {
<a name="l00230"></a>00230                         <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=UCHAR_MAX;
<a name="l00231"></a>00231                     }
<a name="l00232"></a>00232                     <span class="keywordflow">else</span>
<a name="l00233"></a>00233                         <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=SCHAR_MAX;
<a name="l00234"></a>00234 
<a name="l00235"></a>00235                     <span class="keywordflow">break</span>;
<a name="l00236"></a>00236                 }
<a name="l00237"></a>00237             <span class="keywordflow">case</span> 2:
<a name="l00238"></a>00238                 {
<a name="l00239"></a>00239                     <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>=0;
<a name="l00240"></a>00240                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_in)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> short) )
<a name="l00241"></a>00241                     {
<a name="l00242"></a>00242                         <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=(TYPE_in)USHRT_MAX;
<a name="l00243"></a>00243                     }
<a name="l00244"></a>00244                     <span class="keywordflow">else</span>
<a name="l00245"></a>00245                         <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=(TYPE_in)SHRT_MAX;
<a name="l00246"></a>00246                     <span class="keywordflow">break</span>;
<a name="l00247"></a>00247                 }
<a name="l00248"></a>00248             <span class="keywordflow">case</span> 4:
<a name="l00249"></a>00249                 {
<a name="l00250"></a>00250                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_in)==<span class="keyword">typeid</span>(float) )
<a name="l00251"></a>00251                     {
<a name="l00252"></a>00252                         <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>=(TYPE_in)0.0;
<a name="l00253"></a>00253                         <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=(TYPE_in)1.0;
<a name="l00254"></a>00254                     }
<a name="l00255"></a>00255                     <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE_in)==<span class="keyword">typeid</span>(int) || <span class="keyword">typeid</span>(TYPE_in)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> int) )
<a name="l00256"></a>00256                     {
<a name="l00257"></a>00257                         <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>=0;
<a name="l00258"></a>00258                         <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=UCHAR_MAX;  
<a name="l00259"></a>00259                     }
<a name="l00260"></a>00260                     <span class="keywordflow">break</span>;
<a name="l00261"></a>00261                 }
<a name="l00262"></a>00262             <span class="keywordflow">case</span> 8:
<a name="l00263"></a>00263                 {
<a name="l00264"></a>00264                     <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>=(TYPE_in)0.0;
<a name="l00265"></a>00265                     <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>=(TYPE_in)1.0;
<a name="l00266"></a>00266                     <span class="keywordflow">break</span>;
<a name="l00267"></a>00267                 }
<a name="l00268"></a>00268             <span class="keywordflow">default</span>:
<a name="l00269"></a>00269                 {
<a name="l00270"></a>00270                     ;
<a name="l00271"></a>00271                 }
<a name="l00272"></a>00272             }
<a name="l00273"></a>00273         }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275         <span class="keywordtype">double</span> scale=   double(<a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>-<a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>)/double(<a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>-<a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>) ;
<a name="l00276"></a>00276 
<a name="l00277"></a>00277         <span class="keywordflow">for</span> (i=0; i&lt;outheight; i++)
<a name="l00278"></a>00278         {
<a name="l00279"></a>00279             <span class="keywordflow">for</span> (j=0; j&lt;outwidth; j++)
<a name="l00280"></a>00280             {
<a name="l00281"></a>00281                 <span class="keywordflow">for</span>(b=0;b&lt;outbands;b++)
<a name="l00282"></a>00282                 {
<a name="l00283"></a>00283                     TYPE_in in=*(inbuf+ i*(inyStride/<span class="keyword">sizeof</span>(TYPE_in) ) + j* (inxStride/<span class="keyword">sizeof</span>(TYPE_in) ) + b );
<a name="l00284"></a>00284                     TYPE_out t= TYPE_out( (in)*scale +<a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>) ;
<a name="l00285"></a>00285                     *(outbuf+i*(outyStride/<span class="keyword">sizeof</span>(TYPE_out) ) +j* (outxStride/ <span class="keyword">sizeof</span>(TYPE_out) ) + b ) = t;
<a name="l00286"></a>00286                 }
<a name="l00287"></a>00287             }
<a name="l00288"></a>00288         }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     }
<a name="l00291"></a>00291 <span class="keyword">protected</span>:
<a name="l00292"></a><a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">00292</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_type_convert_functor.html#a734470f1fad69219d9a7df53b30251b0">src</a>;
<a name="l00293"></a>00293 
<a name="l00294"></a><a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">00294</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_type_convert_functor.html#a968c75bf64b1a9839e925bbbcf2b844a">dst</a>;
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">00296</a>     TYPE_in <a class="code" href="classkl_type_convert_functor.html#ad4418d3206bc9af111717109620d2804">inmin</a>;
<a name="l00297"></a>00297 
<a name="l00298"></a><a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">00298</a>     TYPE_in <a class="code" href="classkl_type_convert_functor.html#a77106769502a11427d384fde50977029">inmax</a>;
<a name="l00299"></a>00299 
<a name="l00300"></a><a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">00300</a>     TYPE_out <a class="code" href="classkl_type_convert_functor.html#a6c4c539687357c807a1e3a3107a52f7b">outmin</a>;
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">00302</a>     TYPE_out <a class="code" href="classkl_type_convert_functor.html#a89eed65a12819cd1b0458e40135faaa7">outmax</a>;
<a name="l00303"></a>00303 
<a name="l00304"></a><a class="code" href="classkl_type_convert_functor.html#a745af9e977ebfe9ac08294103eb68d89">00304</a>     <span class="keywordtype">bool</span> <a class="code" href="classkl_type_convert_functor.html#a745af9e977ebfe9ac08294103eb68d89">doScaling</a>;
<a name="l00305"></a>00305 };
<a name="l00306"></a>00306 
<a name="l00307"></a><a class="code" href="classkl_threshold_functor.html">00307</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> TYPE&gt; <span class="keyword">class </span><a class="code" href="classkl_threshold_functor.html">klThresholdFunctor</a>{
<a name="l00308"></a>00308 <span class="keyword">public</span>:
<a name="l00309"></a>00309     <span class="comment">//Maps [0,thresholdLow] U [thresholdHigh,MAXVAL(TYPE) ] -----&gt; LowVal , HighVal</span>
<a name="l00310"></a><a class="code" href="classkl_threshold_functor.html#ad9df59430db062f382e0d033024a1bd4">00310</a>     <a class="code" href="classkl_threshold_functor.html#ad9df59430db062f382e0d033024a1bd4">klThresholdFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <span class="keywordtype">double</span> lthresholdHi=1.0,<span class="keywordtype">double</span> lthresholdLow=0,
<a name="l00311"></a>00311         <span class="keywordtype">bool</span> luseLowThreshold=<span class="keyword">false</span>,<span class="keywordtype">bool</span> luseHighThreshold=<span class="keyword">true</span>, 
<a name="l00312"></a>00312         <span class="keywordtype">double</span> lthresholdHiVal=1.0,<span class="keywordtype">double</span> lthresholdLowVal=0.0,<span class="keywordtype">bool</span> luseThresholdVals=<span class="keyword">false</span>)
<a name="l00313"></a>00313         : <a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>(lsrc), <a class="code" href="classkl_threshold_functor.html#a4dd1fa6ddebf70a5e113fb0c11d89b89">thresholdLow</a>(lthresholdLow), <a class="code" href="classkl_threshold_functor.html#a4b6204e5daa1158aed2b226712dbcf95">thresholdHi</a>(lthresholdHi), 
<a name="l00314"></a>00314         <a class="code" href="classkl_threshold_functor.html#a4e942114b3a0628f6c76f14e135d3c66">useLowThreshold</a>(luseLowThreshold), <a class="code" href="classkl_threshold_functor.html#aef665d2b3a1b15fd1dadc9ba97c78c19">useHighThreshold</a>(luseHighThreshold), <a class="code" href="classkl_threshold_functor.html#accd76b6eb426d236eca77afb9eb4bd62">useThresholdVals</a>(luseThresholdVals)
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     {
<a name="l00317"></a>00317         <span class="keywordflow">if</span>(!<a class="code" href="classkl_threshold_functor.html#accd76b6eb426d236eca77afb9eb4bd62">useThresholdVals</a>)
<a name="l00318"></a>00318         {
<a name="l00319"></a>00319             <a class="code" href="classkl_threshold_functor.html#a1c56cd788c5f0f062158a49fec06ea6a">thresholdHiVal</a>=<a class="code" href="classkl_threshold_functor.html#a4b6204e5daa1158aed2b226712dbcf95">thresholdHi</a>;
<a name="l00320"></a>00320             <a class="code" href="classkl_threshold_functor.html#ae052353842b896d2698ec03022cc5533">thresholdLowVal</a>=<a class="code" href="classkl_threshold_functor.html#a4dd1fa6ddebf70a5e113fb0c11d89b89">thresholdLow</a>;
<a name="l00321"></a>00321         }
<a name="l00322"></a>00322         <span class="keywordflow">else</span>
<a name="l00323"></a>00323         {
<a name="l00324"></a>00324             <a class="code" href="classkl_threshold_functor.html#a1c56cd788c5f0f062158a49fec06ea6a">thresholdHiVal</a>=lthresholdHiVal;
<a name="l00325"></a>00325             <a class="code" href="classkl_threshold_functor.html#ae052353842b896d2698ec03022cc5533">thresholdLowVal</a>=lthresholdLowVal;
<a name="l00326"></a>00326         }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328     }
<a name="l00329"></a><a class="code" href="classkl_threshold_functor.html#a1205d90ec823aaf1d4be7dacd6f7ffa5">00329</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_threshold_functor.html#a1205d90ec823aaf1d4be7dacd6f7ffa5">operator()</a>(<span class="keywordtype">void</span>)
<a name="l00330"></a>00330     {
<a name="l00331"></a>00331         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>-&gt;numBands();
<a name="l00332"></a>00332         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>-&gt;width();
<a name="l00333"></a>00333         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>-&gt;height(); 
<a name="l00334"></a>00334         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>-&gt;bandStride();
<a name="l00335"></a>00335         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>-&gt;xStride();
<a name="l00336"></a>00336         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>-&gt;yStride();
<a name="l00337"></a>00337 
<a name="l00338"></a>00338         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l00339"></a>00339         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;
<a name="l00340"></a>00340         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b;
<a name="l00341"></a>00341 
<a name="l00342"></a>00342         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf=<a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>-&gt;buffer();
<a name="l00343"></a>00343 
<a name="l00344"></a>00344         <span class="keywordflow">for</span> (i=0; i&lt;inheight; i++)
<a name="l00345"></a>00345         {
<a name="l00346"></a>00346             <span class="keywordflow">for</span> (j=0; j&lt;inwidth; j++)
<a name="l00347"></a>00347             {
<a name="l00348"></a>00348                 <span class="keywordflow">for</span>(b=0;b&lt;inbands;b++)
<a name="l00349"></a>00349                 {
<a name="l00350"></a>00350                     TYPE in=*(buf+ i*inyStride + j*inxStride + b);
<a name="l00351"></a>00351                     <span class="keywordflow">if</span>(<a class="code" href="classkl_threshold_functor.html#aef665d2b3a1b15fd1dadc9ba97c78c19">useHighThreshold</a> &amp;&amp; in&gt;<a class="code" href="classkl_threshold_functor.html#a4b6204e5daa1158aed2b226712dbcf95">thresholdHi</a>)
<a name="l00352"></a>00352                         in=(TYPE)<a class="code" href="classkl_threshold_functor.html#a1c56cd788c5f0f062158a49fec06ea6a">thresholdHiVal</a>;
<a name="l00353"></a>00353                     <span class="keywordflow">if</span>(<a class="code" href="classkl_threshold_functor.html#a4e942114b3a0628f6c76f14e135d3c66">useLowThreshold</a> &amp;&amp; in&lt;<a class="code" href="classkl_threshold_functor.html#a4dd1fa6ddebf70a5e113fb0c11d89b89">thresholdLow</a>)
<a name="l00354"></a>00354                         in=<a class="code" href="classkl_threshold_functor.html#ae052353842b896d2698ec03022cc5533">thresholdLowVal</a>;
<a name="l00355"></a>00355                     *(buf+ i*inyStride + j*inxStride + b)=in;
<a name="l00356"></a>00356                 }
<a name="l00357"></a>00357             }
<a name="l00358"></a>00358         }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360     }
<a name="l00361"></a>00361 <span class="keyword">protected</span>:
<a name="l00362"></a><a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">00362</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_threshold_functor.html#aaecb1b1f125042a218cf8d181cb59f1b">src</a>;
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="classkl_threshold_functor.html#a4b6204e5daa1158aed2b226712dbcf95">00364</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_threshold_functor.html#a4b6204e5daa1158aed2b226712dbcf95">thresholdHi</a>;
<a name="l00365"></a>00365 
<a name="l00366"></a><a class="code" href="classkl_threshold_functor.html#a4dd1fa6ddebf70a5e113fb0c11d89b89">00366</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_threshold_functor.html#a4dd1fa6ddebf70a5e113fb0c11d89b89">thresholdLow</a>;
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="classkl_threshold_functor.html#a1c56cd788c5f0f062158a49fec06ea6a">00368</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_threshold_functor.html#a1c56cd788c5f0f062158a49fec06ea6a">thresholdHiVal</a>;
<a name="l00369"></a>00369 
<a name="l00370"></a><a class="code" href="classkl_threshold_functor.html#ae052353842b896d2698ec03022cc5533">00370</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_threshold_functor.html#ae052353842b896d2698ec03022cc5533">thresholdLowVal</a>;
<a name="l00371"></a>00371 
<a name="l00372"></a><a class="code" href="classkl_threshold_functor.html#a4e942114b3a0628f6c76f14e135d3c66">00372</a>     <span class="keywordtype">bool</span> <a class="code" href="classkl_threshold_functor.html#a4e942114b3a0628f6c76f14e135d3c66">useLowThreshold</a>;
<a name="l00373"></a>00373 
<a name="l00374"></a><a class="code" href="classkl_threshold_functor.html#aef665d2b3a1b15fd1dadc9ba97c78c19">00374</a>     <span class="keywordtype">bool</span> <a class="code" href="classkl_threshold_functor.html#aef665d2b3a1b15fd1dadc9ba97c78c19">useHighThreshold</a>;
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="classkl_threshold_functor.html#accd76b6eb426d236eca77afb9eb4bd62">00376</a>     <span class="keywordtype">bool</span> <a class="code" href="classkl_threshold_functor.html#accd76b6eb426d236eca77afb9eb4bd62">useThresholdVals</a>;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 };
<a name="l00379"></a>00379 
<a name="l00380"></a>00380 <span class="keyword">struct </span>padRect;  
<a name="l00381"></a><a class="code" href="classkl_pad_functor.html">00381</a> <span class="keyword">class </span><a class="code" href="classkl_pad_functor.html">klPadFunctor</a>{
<a name="l00382"></a>00382 <span class="keyword">public</span>:
<a name="l00383"></a>00383 
<a name="l00384"></a><a class="code" href="structkl_pad_functor_1_1pad_rect.html">00384</a>     <span class="keyword">struct </span><a class="code" href="structkl_pad_functor_1_1pad_rect.html">padRect</a> {
<a name="l00385"></a><a class="code" href="structkl_pad_functor_1_1pad_rect.html#ab63a09dda76bd6aee54a3afe1fdd89e0">00385</a>         <a class="code" href="structkl_pad_functor_1_1pad_rect.html#ab63a09dda76bd6aee54a3afe1fdd89e0">padRect</a>(<span class="keywordtype">unsigned</span> lx0,<span class="keywordtype">unsigned</span> ly0,<span class="keywordtype">unsigned</span> lw,<span class="keywordtype">unsigned</span> lh)
<a name="l00386"></a>00386         {<a class="code" href="structkl_pad_functor_1_1pad_rect.html#a637cf3e6d7adecc8dc547ee83d2d22de">x0</a>=lx0;<a class="code" href="structkl_pad_functor_1_1pad_rect.html#af6a91f603ecbb9cc9bf95e81859a6a4c">y0</a>=ly0;<a class="code" href="structkl_pad_functor_1_1pad_rect.html#ad6c2a2c3c786bf63f7beacf503ff5c45">w</a>=lw;<a class="code" href="structkl_pad_functor_1_1pad_rect.html#af27bf2edf7fec2114a773087c13e47bc">h</a>=lh;}
<a name="l00387"></a>00387 
<a name="l00388"></a><a class="code" href="structkl_pad_functor_1_1pad_rect.html#a637cf3e6d7adecc8dc547ee83d2d22de">00388</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structkl_pad_functor_1_1pad_rect.html#a637cf3e6d7adecc8dc547ee83d2d22de">x0</a>;
<a name="l00389"></a><a class="code" href="structkl_pad_functor_1_1pad_rect.html#af6a91f603ecbb9cc9bf95e81859a6a4c">00389</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structkl_pad_functor_1_1pad_rect.html#af6a91f603ecbb9cc9bf95e81859a6a4c">y0</a>;
<a name="l00390"></a><a class="code" href="structkl_pad_functor_1_1pad_rect.html#ad6c2a2c3c786bf63f7beacf503ff5c45">00390</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structkl_pad_functor_1_1pad_rect.html#ad6c2a2c3c786bf63f7beacf503ff5c45">w</a>;
<a name="l00391"></a><a class="code" href="structkl_pad_functor_1_1pad_rect.html#af27bf2edf7fec2114a773087c13e47bc">00391</a>         <span class="keywordtype">unsigned</span> <a class="code" href="structkl_pad_functor_1_1pad_rect.html#af27bf2edf7fec2114a773087c13e47bc">h</a>;};
<a name="l00392"></a>00392 
<a name="l00393"></a><a class="code" href="classkl_pad_functor.html#a8c5640eb37f7c0240e84675a0126518c">00393</a>         <span class="keyword">enum</span> <a class="code" href="classkl_pad_functor.html#a8c5640eb37f7c0240e84675a0126518c">padType</a> { PAD_TYPE_MIRROR, PAD_TYPE_WRAP, <a class="code" href="classkl_pad_functor.html#a8c5640eb37f7c0240e84675a0126518cac6fa6373a7f51569d7a5a5a7402e4a8b">PAD_TYPE_CONST</a>};
<a name="l00394"></a>00394 
<a name="l00395"></a><a class="code" href="classkl_pad_functor.html#a3fa6d3f65ec22ec8b2dab1e0e92cf5da">00395</a>         <a class="code" href="classkl_pad_functor.html#a3fa6d3f65ec22ec8b2dab1e0e92cf5da">klPadFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc,<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst, <span class="keywordtype">int</span> lpadType, <a class="code" href="structkl_pad_functor_1_1pad_rect.html">padRect</a> lrect,<span class="keywordtype">double</span> lconstVal=0)
<a name="l00396"></a>00396             : <a class="code" href="classkl_pad_functor.html#a96a63ef107527ce02f961bbdc61543b1">src</a>(lsrc), <a class="code" href="classkl_pad_functor.html#afede6cb518dec216ce9b6de2475005b4">dst</a>(ldst), <a class="code" href="classkl_pad_functor.html#a8c5640eb37f7c0240e84675a0126518c">padType</a>(lpadType), <a class="code" href="classkl_pad_functor.html#a603366d855018e6db204e9a660d19271">rect</a>(lrect), <a class="code" href="classkl_pad_functor.html#a83ed66db6267e5d363ea023d41419ae2">constVal</a>(lconstVal)
<a name="l00397"></a>00397         {
<a name="l00398"></a>00398 
<a name="l00399"></a>00399         }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401         <span class="keywordtype">void</span> <a class="code" href="classkl_pad_functor.html#a2e9931cba60f2589766146f2220d1205">operator()</a>(<span class="keywordtype">void</span>);
<a name="l00402"></a>00402 <span class="keyword">protected</span>:
<a name="l00403"></a><a class="code" href="classkl_pad_functor.html#a96a63ef107527ce02f961bbdc61543b1">00403</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_pad_functor.html#a96a63ef107527ce02f961bbdc61543b1">src</a>;
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="classkl_pad_functor.html#afede6cb518dec216ce9b6de2475005b4">00405</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_pad_functor.html#afede6cb518dec216ce9b6de2475005b4">dst</a>;
<a name="l00406"></a>00406 
<a name="l00407"></a><a class="code" href="classkl_pad_functor.html#aa42c63c98addf53fc3fdaa5684fab8d8">00407</a>     <span class="keywordtype">int</span> padType;
<a name="l00408"></a>00408 
<a name="l00409"></a><a class="code" href="classkl_pad_functor.html#a603366d855018e6db204e9a660d19271">00409</a>     <a class="code" href="structkl_pad_functor_1_1pad_rect.html">padRect</a> <a class="code" href="classkl_pad_functor.html#a603366d855018e6db204e9a660d19271">rect</a>;
<a name="l00410"></a>00410 
<a name="l00411"></a><a class="code" href="classkl_pad_functor.html#a83ed66db6267e5d363ea023d41419ae2">00411</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_pad_functor.html#a83ed66db6267e5d363ea023d41419ae2">constVal</a>;
<a name="l00412"></a>00412 };
<a name="l00413"></a>00413 
<a name="l00414"></a>00414 <span class="preprocessor">#include &quot;ipp.h&quot;</span>
<a name="l00415"></a><a class="code" href="classkl_logical_functor.html">00415</a> <span class="keyword">class </span><a class="code" href="classkl_logical_functor.html">klLogicalFunctor</a>{
<a name="l00416"></a>00416 <span class="keyword">public</span>:
<a name="l00417"></a>00417 
<a name="l00418"></a><a class="code" href="classkl_logical_functor.html#a7d32610e94b76d4bfbc945ea9aef559eaa1b7003630ab8740ea688ec32420449d">00418</a>     <span class="keyword">enum</span> <a class="code" href="classkl_logical_functor.html#a7d32610e94b76d4bfbc945ea9aef559e">LogicalFunctorOperationType</a> {AND,OR,<a class="code" href="classkl_logical_functor.html#a7d32610e94b76d4bfbc945ea9aef559ea8a17ccf298db4973bec2fec5d10a180e">NOT</a>};
<a name="l00419"></a>00419 
<a name="l00420"></a>00420     <span class="comment">//Pass in NULL for the second source buffer when performing the not operation.</span>
<a name="l00421"></a>00421     <span class="comment">//For in place operation, pass the first source buffer as the destination parameter.</span>
<a name="l00422"></a><a class="code" href="classkl_logical_functor.html#a9ee8c88bcc9b64aeb7e238b3af24aae9">00422</a>     <a class="code" href="classkl_logical_functor.html#a9ee8c88bcc9b64aeb7e238b3af24aae9">klLogicalFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc1, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc2, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst, <span class="keywordtype">int</span> ltype)
<a name="l00423"></a>00423         : <a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>(lsrc1), <a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>(lsrc2), <a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>(ldst), <a class="code" href="classkl_logical_functor.html#a833a8a0362d5cb5cc85cf2c8dada4d51">type</a>(<a class="code" href="classkl_logical_functor.html#a7d32610e94b76d4bfbc945ea9aef559e">LogicalFunctorOperationType</a>(ltype) )
<a name="l00424"></a>00424     {
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     }
<a name="l00427"></a><a class="code" href="classkl_logical_functor.html#ada931f4b21235495c6afd7e245710612">00427</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_logical_functor.html#ada931f4b21235495c6afd7e245710612">operator()</a>(<span class="keywordtype">void</span>)
<a name="l00428"></a>00428     {
<a name="l00429"></a>00429         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcBuf1=<a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;buffer();
<a name="l00430"></a>00430         <span class="keywordtype">size_t</span> inbands = <a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;numBands();
<a name="l00431"></a>00431         <span class="keywordtype">size_t</span> inwidth = <a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;width();
<a name="l00432"></a>00432         <span class="keywordtype">size_t</span> inheight= <a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;height(); 
<a name="l00433"></a>00433         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;bandStride();
<a name="l00434"></a>00434         <span class="keywordtype">size_t</span> inxStride = <a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;xStride();
<a name="l00435"></a>00435         <span class="keywordtype">size_t</span> inyStride = <a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;yStride();
<a name="l00436"></a>00436 
<a name="l00437"></a>00437         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcBuf2;
<a name="l00438"></a>00438         <span class="keywordtype">size_t</span> inbands2;
<a name="l00439"></a>00439         <span class="keywordtype">size_t</span> inwidth2 ;
<a name="l00440"></a>00440         <span class="keywordtype">size_t</span> inheight2;
<a name="l00441"></a>00441         <span class="keywordtype">size_t</span> inbandStride2;
<a name="l00442"></a>00442         <span class="keywordtype">size_t</span> inxStride2;
<a name="l00443"></a>00443         <span class="keywordtype">size_t</span> inyStride2;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445         <span class="keywordflow">if</span>(<a class="code" href="classkl_logical_functor.html#a833a8a0362d5cb5cc85cf2c8dada4d51">type</a> != klLogicalFunctor::LogicalFunctorOperationType::NOT )
<a name="l00446"></a>00446         {
<a name="l00447"></a>00447             srcBuf2=<a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;buffer();
<a name="l00448"></a>00448             inbands2=<a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;numBands();
<a name="l00449"></a>00449             inwidth2 =<a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;width();
<a name="l00450"></a>00450             inheight2=<a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;height(); 
<a name="l00451"></a>00451             inbandStride2=<a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;bandStride();
<a name="l00452"></a>00452             inxStride2 =<a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;xStride();
<a name="l00453"></a>00453             inyStride2= <a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;yStride();
<a name="l00454"></a>00454 
<a name="l00455"></a>00455             <span class="keywordflow">if</span>( inwidth2!=inwidth ||inheight2!=inheight)
<a name="l00456"></a>00456                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot; klLogicalFunctor : source images have inconsistent dimensions.&quot;</span>;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458             <span class="keywordflow">if</span>(<a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>-&gt;sampleBits()!=8)
<a name="l00459"></a>00459                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot; klLogicalFunctor : bad bitdepth in input image&quot;</span>;
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463         <span class="keywordflow">if</span>(inbands!=1 || (<a class="code" href="classkl_logical_functor.html#a833a8a0362d5cb5cc85cf2c8dada4d51">type</a> != klLogicalFunctor::LogicalFunctorOperationType::NOT &amp;&amp; inbands2!=1) )
<a name="l00464"></a>00464             <span class="keywordflow">throw</span> <span class="stringliteral">&quot; klLogicalFunctor : only since band images supported at this time.&quot;</span>;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* dstBuf=<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;buffer();
<a name="l00467"></a>00467         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;numBands();
<a name="l00468"></a>00468         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;width();
<a name="l00469"></a>00469         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;height(); 
<a name="l00470"></a>00470         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;bandStride();
<a name="l00471"></a>00471         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;xStride();
<a name="l00472"></a>00472         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;yStride();
<a name="l00473"></a>00473 
<a name="l00474"></a>00474         <span class="keywordflow">if</span>(<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;sampleBits()!=8)
<a name="l00475"></a>00475             <span class="keywordflow">throw</span> <span class="stringliteral">&quot; klLogicalFunctor : bad bitdepth in ouput image&quot;</span>;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477         <span class="keywordflow">if</span>(<a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>-&gt;sampleBits()!=8)
<a name="l00478"></a>00478             <span class="keywordflow">throw</span> <span class="stringliteral">&quot; klLogicalFunctor : bad bitdepth in input image&quot;</span>;
<a name="l00479"></a>00479 
<a name="l00480"></a>00480         IppStatus  ippStatusResult;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482         IppiSize dstRoiSize;
<a name="l00483"></a>00483 
<a name="l00484"></a>00484         dstRoiSize.width=<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;width();
<a name="l00485"></a>00485 
<a name="l00486"></a>00486         dstRoiSize.height=<a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>-&gt;height();
<a name="l00487"></a>00487 
<a name="l00488"></a>00488         <span class="keywordflow">switch</span>(<a class="code" href="classkl_logical_functor.html#a833a8a0362d5cb5cc85cf2c8dada4d51">type</a>)
<a name="l00489"></a>00489         {
<a name="l00490"></a>00490         <span class="keywordflow">case</span> 0 :
<a name="l00491"></a>00491             {
<a name="l00492"></a>00492                 <span class="keywordflow">if</span>(srcBuf1==dstBuf)
<a name="l00493"></a>00493                     ippStatusResult=ippiAnd_8u_C1IR(srcBuf2, inyStride2 ,   srcBuf1, inyStride, dstRoiSize);
<a name="l00494"></a>00494                 <span class="keywordflow">else</span>
<a name="l00495"></a>00495                     ippStatusResult=ippiAnd_8u_C1R( srcBuf1, inyStride,srcBuf2, inyStride2 , dstBuf, outyStride, dstRoiSize);
<a name="l00496"></a>00496                 <span class="keywordflow">break</span>;
<a name="l00497"></a>00497             }
<a name="l00498"></a>00498         <span class="keywordflow">case</span> 1 :
<a name="l00499"></a>00499             {
<a name="l00500"></a>00500 
<a name="l00501"></a>00501                 <span class="keywordflow">if</span>(srcBuf1==dstBuf)
<a name="l00502"></a>00502                     ippStatusResult=ippiOr_8u_C1IR(srcBuf2, inyStride2 ,    srcBuf1, inyStride, dstRoiSize);
<a name="l00503"></a>00503                 <span class="keywordflow">else</span>
<a name="l00504"></a>00504                     ippStatusResult=ippiOr_8u_C1R(  srcBuf1, inyStride,srcBuf2, inyStride2 , dstBuf, outyStride, dstRoiSize);
<a name="l00505"></a>00505                 <span class="keywordflow">break</span>;
<a name="l00506"></a>00506             }
<a name="l00507"></a>00507         <span class="keywordflow">case</span> 2 :
<a name="l00508"></a>00508             {
<a name="l00509"></a>00509                 <span class="keywordflow">if</span>(srcBuf1==dstBuf)
<a name="l00510"></a>00510                     ippStatusResult=ippiNot_8u_C1IR(srcBuf1, inyStride, dstRoiSize);
<a name="l00511"></a>00511                 <span class="keywordflow">else</span>
<a name="l00512"></a>00512                     ippStatusResult=ippiNot_8u_C1R( srcBuf1, inyStride,dstBuf, outyStride, dstRoiSize);
<a name="l00513"></a>00513                 <span class="keywordflow">break</span>;
<a name="l00514"></a>00514             }
<a name="l00515"></a>00515         <span class="keywordflow">default</span> :
<a name="l00516"></a>00516             {
<a name="l00517"></a>00517                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;  invalid LogicalFunctorOperationType parameter.&quot;</span>;
<a name="l00518"></a>00518             }
<a name="l00519"></a>00519 
<a name="l00520"></a>00520             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l00521"></a>00521             {
<a name="l00522"></a>00522                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;  Bad ipp result in klLogicalFunctor.&quot;</span>;
<a name="l00523"></a>00523             }
<a name="l00524"></a>00524         }
<a name="l00525"></a>00525     }
<a name="l00526"></a>00526 <span class="keyword">protected</span>:
<a name="l00527"></a><a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">00527</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_logical_functor.html#aa271e88e7a0dfefe8a5c02c79457e71c">src1</a>;
<a name="l00528"></a>00528 
<a name="l00529"></a><a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">00529</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_logical_functor.html#a37adb761329e1f6145ec55ad0504538b">src2</a>;
<a name="l00530"></a>00530 
<a name="l00531"></a><a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">00531</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_logical_functor.html#a24cb1f931ff50860cf9ab4debf4c6acb">dst</a>;
<a name="l00532"></a>00532 
<a name="l00533"></a><a class="code" href="classkl_logical_functor.html#a833a8a0362d5cb5cc85cf2c8dada4d51">00533</a>     <a class="code" href="classkl_logical_functor.html#a7d32610e94b76d4bfbc945ea9aef559e">LogicalFunctorOperationType</a> <a class="code" href="classkl_logical_functor.html#a833a8a0362d5cb5cc85cf2c8dada4d51">type</a>;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535 };
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 
<a name="l00538"></a>00538 <span class="comment">//A general convolution.  This buffer op handles unsigned char and float types and 1 and 3 band image data.</span>
<a name="l00539"></a><a class="code" href="classkl_filter_functor.html">00539</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_filter_functor.html">klFilterFunctor</a>{
<a name="l00540"></a>00540 <span class="keyword">public</span>:
<a name="l00541"></a>00541     <span class="comment">//If the kernel width or height is one, the seperable routines are called.</span>
<a name="l00542"></a>00542     <span class="comment">//This is an in-place buffer op in that the source data is overwritten with the convolution results.</span>
<a name="l00543"></a><a class="code" href="classkl_filter_functor.html#ac89dcb38ef4f8998526146028a4aed9f">00543</a>     <a class="code" href="classkl_filter_functor.html#ac89dcb38ef4f8998526146028a4aed9f">klFilterFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, TYPE* lkernel, <span class="keywordtype">unsigned</span> lkernelWidth, <span class="keywordtype">unsigned</span> lkernelHeight)
<a name="l00544"></a>00544         : <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>(lsrc), <a class="code" href="classkl_filter_functor.html#ae29d24b23c63725929d8e76ad30916af">kernel</a>(lkernel), <a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>(lkernelWidth), <a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>(lkernelHeight)
<a name="l00545"></a>00545     {
<a name="l00546"></a>00546 
<a name="l00547"></a>00547     }
<a name="l00548"></a>00548 
<a name="l00549"></a><a class="code" href="classkl_filter_functor.html#a35c45020d74c4dd91c743629d34a8e8b">00549</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_filter_functor.html#a35c45020d74c4dd91c743629d34a8e8b">operator()</a>(<span class="keywordtype">void</span>)
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551 
<a name="l00552"></a>00552         <span class="keywordflow">if</span>(<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;numBands() !=1 &amp;&amp; <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;numBands()!=3)
<a name="l00553"></a>00553             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klFilterFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* inbuf=<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer();
<a name="l00556"></a>00556         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;numBands();
<a name="l00557"></a>00557         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;width();
<a name="l00558"></a>00558         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;height(); 
<a name="l00559"></a>00559         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;bandStride();
<a name="l00560"></a>00560         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;xStride();
<a name="l00561"></a>00561         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride();
<a name="l00562"></a>00562 
<a name="l00563"></a>00563         <span class="comment">//Prep padded image for ipp.</span>
<a name="l00564"></a>00564         <span class="keywordtype">unsigned</span> x0=2*<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>;
<a name="l00565"></a>00565         <span class="keywordtype">unsigned</span> y0=2*<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>;
<a name="l00566"></a>00566 
<a name="l00567"></a>00567         <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> dst=<span class="keyword">new</span> <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;TYPE&gt;</a>(inwidth+5*x0,inheight+5*y0,inbands);  
<a name="l00568"></a>00568 
<a name="l00569"></a>00569         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* outbuf=dst-&gt;buffer();
<a name="l00570"></a>00570         <span class="keywordtype">size_t</span> outbands=dst-&gt;numBands();
<a name="l00571"></a>00571         <span class="keywordtype">size_t</span> outwidth =dst-&gt;width();
<a name="l00572"></a>00572         <span class="keywordtype">size_t</span> outheight=dst-&gt;height(); 
<a name="l00573"></a>00573         <span class="keywordtype">size_t</span> outbandStride=dst-&gt;bandStride();
<a name="l00574"></a>00574         <span class="keywordtype">size_t</span> outxStride =dst-&gt;xStride();
<a name="l00575"></a>00575         <span class="keywordtype">size_t</span> outyStride= dst-&gt;yStride();
<a name="l00576"></a>00576 
<a name="l00577"></a>00577         <a class="code" href="structkl_pad_functor_1_1pad_rect.html">klPadFunctor::padRect</a> padRect(x0, y0, inwidth,inheight);
<a name="l00578"></a>00578 
<a name="l00579"></a>00579         <a class="code" href="classkl_pad_functor.html">klPadFunctor</a> padFn(<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>, dst, klPadFunctor::padType::PAD_TYPE_MIRROR, padRect); 
<a name="l00580"></a>00580 
<a name="l00581"></a>00581         <span class="keywordtype">unsigned</span> padOffset=(dst-&gt;yStride() * padRect.<a class="code" href="structkl_pad_functor_1_1pad_rect.html#af6a91f603ecbb9cc9bf95e81859a6a4c">y0</a>+ padRect.<a class="code" href="structkl_pad_functor_1_1pad_rect.html#a637cf3e6d7adecc8dc547ee83d2d22de">x0</a> *dst-&gt;xStride()  );
<a name="l00582"></a>00582 
<a name="l00583"></a>00583         padFn();
<a name="l00584"></a>00584 
<a name="l00585"></a>00585         IppStatus  ippStatusResult;
<a name="l00586"></a>00586 
<a name="l00587"></a>00587         IppiSize dstRoiSize;
<a name="l00588"></a>00588 
<a name="l00589"></a>00589         dstRoiSize.width=<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;width();
<a name="l00590"></a>00590 
<a name="l00591"></a>00591         dstRoiSize.height=<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;height();
<a name="l00592"></a>00592 
<a name="l00593"></a>00593         IppiSize kernelSize;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595         kernelSize.width=<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>;
<a name="l00596"></a>00596 
<a name="l00597"></a>00597         kernelSize.height=<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599         <span class="keywordtype">unsigned</span> anchorX=((int)std::floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>/2)%2==0) ? std::floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>/2)+1 : std::floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>/2) ;
<a name="l00600"></a>00600 
<a name="l00601"></a>00601         <span class="keywordtype">unsigned</span> anchorY=((int)floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>/2)%2==0) ? floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>/2)+1 : floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>/2) ; 
<a name="l00602"></a>00602 
<a name="l00603"></a>00603         IppiPoint anchor;
<a name="l00604"></a>00604 
<a name="l00605"></a>00605         anchor.x=anchorX;
<a name="l00606"></a>00606 
<a name="l00607"></a>00607         anchor.y=anchorY;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l00612"></a>00612         {
<a name="l00613"></a>00613             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pSrcf=dst-&gt;buffer()+padOffset;
<a name="l00614"></a>00614 
<a name="l00615"></a>00615             <span class="keywordtype">float</span>* pKernel = (<span class="keywordtype">float</span>*)<a class="code" href="classkl_filter_functor.html#ae29d24b23c63725929d8e76ad30916af">kernel</a>;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617             <span class="keywordflow">switch</span>(inbands)
<a name="l00618"></a>00618             {
<a name="l00619"></a>00619             <span class="keywordflow">case</span>(1):
<a name="l00620"></a>00620                 {
<a name="l00621"></a>00621                     <span class="keywordflow">if</span>(<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>==1)
<a name="l00622"></a>00622                     {
<a name="l00623"></a>00623                         ippStatusResult =   ippiFilterColumn_32f_C1R(
<a name="l00624"></a>00624                             (<span class="keywordtype">float</span>*)pSrcf, dst-&gt;yStride(),
<a name="l00625"></a>00625                             (<span class="keywordtype">float</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00626"></a>00626                             dstRoiSize, pKernel, <a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>,anchorY);
<a name="l00627"></a>00627                     }
<a name="l00628"></a>00628                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>==1)
<a name="l00629"></a>00629                     {
<a name="l00630"></a>00630                         ippStatusResult =   ippiFilterRow_32f_C1R(
<a name="l00631"></a>00631                             (<span class="keywordtype">float</span>*)pSrcf, dst-&gt;yStride(),
<a name="l00632"></a>00632                             (<span class="keywordtype">float</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00633"></a>00633                             dstRoiSize, pKernel, <a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>,anchorX);
<a name="l00634"></a>00634 
<a name="l00635"></a>00635                     }
<a name="l00636"></a>00636                     <span class="keywordflow">else</span>
<a name="l00637"></a>00637                     {
<a name="l00638"></a>00638                         ippStatusResult = ippiFilter_32f_C1R((<span class="keywordtype">float</span>*)pSrcf, dst-&gt;yStride(),
<a name="l00639"></a>00639                             (<span class="keywordtype">float</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00640"></a>00640                             dstRoiSize, pKernel,  kernelSize,anchor);                       
<a name="l00641"></a>00641                         <span class="comment">//  klRasterBufferPointer temp=new klPackedHeapRasterBuffer&lt;unsigned char&gt;(inwidth,inheight,1,alignment);</span>
<a name="l00642"></a>00642                         <span class="comment">//  klTypeConvertFunctor&lt;float, unsigned char&gt; typeConvFn(src,temp,false, 0.0,1.0, 0,255);  </span>
<a name="l00643"></a>00643                         <span class="comment">//  typeConvFn();</span>
<a name="l00644"></a>00644                     }
<a name="l00645"></a>00645                     <span class="keywordflow">break</span>;
<a name="l00646"></a>00646                 }
<a name="l00647"></a>00647             <span class="keywordflow">case</span>(3):
<a name="l00648"></a>00648                 {
<a name="l00649"></a>00649                     <span class="keywordflow">if</span>(<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>==1)
<a name="l00650"></a>00650                     {
<a name="l00651"></a>00651                         ippStatusResult =   ippiFilterColumn_32f_C3R(
<a name="l00652"></a>00652                             (<span class="keywordtype">float</span>*)pSrcf, dst-&gt;yStride(),
<a name="l00653"></a>00653                             (<span class="keywordtype">float</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00654"></a>00654                             dstRoiSize, pKernel, <a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>,anchorY);
<a name="l00655"></a>00655 
<a name="l00656"></a>00656                     }
<a name="l00657"></a>00657                     <span class="keywordflow">if</span>(<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>==1)
<a name="l00658"></a>00658                     {
<a name="l00659"></a>00659                         ippStatusResult =   ippiFilterRow_32f_C3R(
<a name="l00660"></a>00660                             (<span class="keywordtype">float</span>*)pSrcf, dst-&gt;yStride(),
<a name="l00661"></a>00661                             (<span class="keywordtype">float</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00662"></a>00662                             dstRoiSize, pKernel, <a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>,anchorX);
<a name="l00663"></a>00663 
<a name="l00664"></a>00664                     }
<a name="l00665"></a>00665                     <span class="keywordflow">else</span>
<a name="l00666"></a>00666                     {
<a name="l00667"></a>00667 
<a name="l00668"></a>00668                         ippStatusResult = ippiFilter_32f_C3R((<span class="keywordtype">float</span>*)pSrcf, dst-&gt;yStride(),
<a name="l00669"></a>00669                             (<span class="keywordtype">float</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00670"></a>00670                             dstRoiSize, pKernel,  kernelSize,anchor);                       
<a name="l00671"></a>00671                     }
<a name="l00672"></a>00672                     <span class="keywordflow">break</span>;
<a name="l00673"></a>00673 
<a name="l00674"></a>00674                 }
<a name="l00675"></a>00675             }<span class="comment">//end switch inbands</span>
<a name="l00676"></a>00676 
<a name="l00677"></a>00677         }<span class="comment">//end float case</span>
<a name="l00678"></a>00678 
<a name="l00679"></a>00679         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char))
<a name="l00680"></a>00680         {
<a name="l00681"></a>00681             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pSrcc =  dst-&gt;buffer()+padOffset;
<a name="l00682"></a>00682 
<a name="l00683"></a>00683             <span class="keywordtype">int</span>* h=<span class="keyword">new</span> <span class="keywordtype">int</span>[<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>*<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>];
<a name="l00684"></a>00684             <span class="keywordtype">unsigned</span> i;
<a name="l00685"></a>00685             <span class="keywordtype">unsigned</span> j;
<a name="l00686"></a>00686             <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>;i++)
<a name="l00687"></a>00687             {
<a name="l00688"></a>00688                 <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>;j++)
<a name="l00689"></a>00689                 {
<a name="l00690"></a>00690                     *(h + i*kernelWidth + j) =*(<a class="code" href="classkl_filter_functor.html#ae29d24b23c63725929d8e76ad30916af">kernel</a> + i*kernelWidth + j);
<a name="l00691"></a>00691                 }
<a name="l00692"></a>00692             }
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 
<a name="l00695"></a>00695             <span class="keywordflow">switch</span>(inbands)
<a name="l00696"></a>00696             {
<a name="l00697"></a>00697             <span class="keywordflow">case</span>(1):
<a name="l00698"></a>00698                 {
<a name="l00699"></a>00699                     <span class="keywordflow">if</span>(kernelWidth==1)
<a name="l00700"></a>00700                     {
<a name="l00701"></a>00701                         ippStatusResult =   ippiFilterColumn_8u_C1R(
<a name="l00702"></a>00702                             pSrcc, dst-&gt;yStride(),
<a name="l00703"></a>00703                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00704"></a>00704                             dstRoiSize, h, <a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>,anchorY,255);
<a name="l00705"></a>00705                     }
<a name="l00706"></a>00706                     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>==1)
<a name="l00707"></a>00707                     {
<a name="l00708"></a>00708                         ippStatusResult =   ippiFilterRow_8u_C1R(
<a name="l00709"></a>00709                             pSrcc, dst-&gt;yStride(),
<a name="l00710"></a>00710                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00711"></a>00711                             dstRoiSize, h, kernelWidth,anchorX,255);
<a name="l00712"></a>00712 
<a name="l00713"></a>00713                     }
<a name="l00714"></a>00714                     <span class="keywordflow">else</span>
<a name="l00715"></a>00715                     {
<a name="l00716"></a>00716                         ippStatusResult = ippiFilter_8u_C1R(pSrcc, dst-&gt;yStride(),
<a name="l00717"></a>00717                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00718"></a>00718                             dstRoiSize, h,  kernelSize,anchor,255);                     
<a name="l00719"></a>00719                     }
<a name="l00720"></a>00720                     <span class="keywordflow">break</span>;
<a name="l00721"></a>00721                 }
<a name="l00722"></a>00722             <span class="keywordflow">case</span>(3):
<a name="l00723"></a>00723                 {
<a name="l00724"></a>00724                     <span class="keywordflow">if</span>(kernelWidth==1)
<a name="l00725"></a>00725                     {
<a name="l00726"></a>00726                         ippStatusResult =   ippiFilterColumn_8u_C3R(
<a name="l00727"></a>00727                             pSrcc, dst-&gt;yStride(),
<a name="l00728"></a>00728                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00729"></a>00729                             dstRoiSize, h, <a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>,anchorY,255);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731                     }
<a name="l00732"></a>00732                     <span class="keywordflow">if</span>(<a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>==1)
<a name="l00733"></a>00733                     {
<a name="l00734"></a>00734                         ippStatusResult =   ippiFilterRow_8u_C3R(
<a name="l00735"></a>00735                             pSrcc, dst-&gt;yStride(),
<a name="l00736"></a>00736                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00737"></a>00737                             dstRoiSize, h, kernelWidth,anchorX, 255);
<a name="l00738"></a>00738 
<a name="l00739"></a>00739                     }
<a name="l00740"></a>00740                     <span class="keywordflow">else</span>
<a name="l00741"></a>00741                     {
<a name="l00742"></a>00742                         ippStatusResult = ippiFilter_8u_C3R(pSrcc, dst-&gt;yStride(),
<a name="l00743"></a>00743                             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;buffer(), <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>-&gt;yStride(),
<a name="l00744"></a>00744                             dstRoiSize, h,  kernelSize,anchor, 255);                        
<a name="l00745"></a>00745                     }
<a name="l00746"></a>00746                     <span class="keywordflow">break</span>;
<a name="l00747"></a>00747 
<a name="l00748"></a>00748                 }
<a name="l00749"></a>00749             }<span class="comment">//end switch inbands</span>
<a name="l00750"></a>00750 
<a name="l00751"></a>00751             <span class="keyword">delete</span>[] h;
<a name="l00752"></a>00752 
<a name="l00753"></a>00753             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l00754"></a>00754                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klFilterFunctor : ipp status error in convolution routine.&quot;</span>;
<a name="l00755"></a>00755 
<a name="l00756"></a>00756         }<span class="comment">//end unsigned char case</span>
<a name="l00757"></a>00757         <span class="keywordflow">else</span>
<a name="l00758"></a>00758             <span class="keywordflow">throw</span> <span class="stringliteral">&quot; : klFilterFunctor : unsupported data type, float and unsigned char supported at this time.&quot;</span>;
<a name="l00759"></a>00759     }<span class="comment">//end operator() </span>
<a name="l00760"></a>00760 <span class="keyword">protected</span>:
<a name="l00761"></a><a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">00761</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_filter_functor.html#ab6e28a11843fd3cabd4b2be03b88a8fe">src</a>;
<a name="l00762"></a><a class="code" href="classkl_filter_functor.html#ae29d24b23c63725929d8e76ad30916af">00762</a>     TYPE* <a class="code" href="classkl_filter_functor.html#ae29d24b23c63725929d8e76ad30916af">kernel</a>;
<a name="l00763"></a><a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">00763</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_filter_functor.html#a7daa927e5653b0763b6a15db1a512e00">kernelWidth</a>;
<a name="l00764"></a><a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">00764</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_filter_functor.html#abb1b7cfa924546498bd85ab85881b2fd">kernelHeight</a>;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766 };
<a name="l00767"></a>00767 
<a name="l00768"></a>00768 
<a name="l00769"></a><a class="code" href="classkl_fill_holes_functor.html">00769</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_fill_holes_functor.html">klFillHolesFunctor</a>{
<a name="l00770"></a>00770 <span class="keyword">public</span>:
<a name="l00771"></a>00771 
<a name="l00772"></a><a class="code" href="classkl_fill_holes_functor.html#a874d8723702a62c908afd48edcd6484d">00772</a>     <a class="code" href="classkl_fill_holes_functor.html#a874d8723702a62c908afd48edcd6484d">klFillHolesFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc,TYPE lbackgroundcolor=0,TYPE lforegroundcolor=255)
<a name="l00773"></a>00773         : <a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>(lsrc), <a class="code" href="classkl_fill_holes_functor.html#adcc30e85b872be8d715ed0ec8d6e976c">backgroundcolor</a>(lbackgroundcolor), <a class="code" href="classkl_fill_holes_functor.html#a25c550c97df45fd8d5a11931e993868f">foregroundcolor</a>(lforegroundcolor)
<a name="l00774"></a>00774     {
<a name="l00775"></a>00775 
<a name="l00776"></a>00776     }
<a name="l00777"></a>00777 
<a name="l00778"></a><a class="code" href="classkl_fill_holes_functor.html#ade5bc2b1908646ce35bd808901a24b7c">00778</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_fill_holes_functor.html#ade5bc2b1908646ce35bd808901a24b7c">operator()</a>(<span class="keywordtype">void</span>){
<a name="l00779"></a>00779 
<a name="l00780"></a>00780         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)!=<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) &amp;&amp; <span class="keyword">typeid</span>(TYPE)!=<span class="keyword">typeid</span>(<span class="keywordtype">float</span>) )
<a name="l00781"></a>00781             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klFillHolesFunctor&lt;TYPE&gt; only implemented for unsigned char and float.&quot;</span>;
<a name="l00782"></a>00782 
<a name="l00783"></a>00783         <span class="keywordflow">if</span>(<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;numBands()!=1)
<a name="l00784"></a>00784             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klFillHolesFunctor&lt;TYPE&gt; requires single band image data.&quot;</span>;
<a name="l00785"></a>00785         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char) )
<a name="l00786"></a>00786         {
<a name="l00787"></a>00787             Ipp8u *source=<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;buffer();
<a name="l00788"></a>00788             <span class="keywordtype">int</span> sourceStride=<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;yStride();
<a name="l00789"></a>00789             IppiSize roiSize;
<a name="l00790"></a>00790 
<a name="l00791"></a>00791             <span class="keywordtype">int</span> width=<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;width();
<a name="l00792"></a>00792             roiSize.width=width;
<a name="l00793"></a>00793 
<a name="l00794"></a>00794             <span class="keywordtype">int</span> height = <a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;height();
<a name="l00795"></a>00795             roiSize.height=height;
<a name="l00796"></a>00796 
<a name="l00797"></a>00797             <span class="comment">// copy the image to a buffer with a black border:</span>
<a name="l00798"></a>00798             IppiSize tempBufferSize = { width + 2, height + 2 };
<a name="l00799"></a>00799 
<a name="l00800"></a>00800 
<a name="l00801"></a>00801             <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> fillBuffer=<span class="keyword">new</span>  <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;unsigned char&gt;</a>(width+2,height+2,1);
<a name="l00802"></a>00802             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* tempBuffer=fillBuffer-&gt;buffer();
<a name="l00803"></a>00803             <span class="keywordtype">int</span> tempBufferLineStride=fillBuffer-&gt;yStride();
<a name="l00804"></a>00804 
<a name="l00805"></a>00805             IppStatus status = ippiSet_8u_C1R(
<a name="l00806"></a>00806                 <a class="code" href="classkl_fill_holes_functor.html#adcc30e85b872be8d715ed0ec8d6e976c">backgroundcolor</a>,
<a name="l00807"></a>00807                 tempBuffer, tempBufferLineStride,
<a name="l00808"></a>00808                 tempBufferSize
<a name="l00809"></a>00809                 );
<a name="l00810"></a>00810 
<a name="l00811"></a>00811             <span class="keywordflow">if</span> (status != ippStsNoErr) {
<a name="l00812"></a>00812                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klFillHolesFunctor : ippiSet failed.&quot;</span>;
<a name="l00813"></a>00813             }
<a name="l00814"></a>00814 
<a name="l00815"></a>00815             status = ippiCopy_8u_C1R(
<a name="l00816"></a>00816                 source, sourceStride,
<a name="l00817"></a>00817                 tempBuffer + tempBufferLineStride + 1, tempBufferLineStride,
<a name="l00818"></a>00818                 roiSize
<a name="l00819"></a>00819                 );
<a name="l00820"></a>00820 
<a name="l00821"></a>00821             <span class="keywordflow">if</span> (status != ippStsNoErr) {
<a name="l00822"></a>00822                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klFillHolesFunctor: ippiCopy failed.&quot;</span>;
<a name="l00823"></a>00823             }
<a name="l00824"></a>00824 
<a name="l00825"></a>00825             <span class="keywordtype">int</span> workAreaSize;
<a name="l00826"></a>00826             status = ippiFloodFillGetSize(roiSize, &amp;workAreaSize);
<a name="l00827"></a>00827             <span class="keywordflow">if</span> (status != ippStsNoErr) {
<a name="l00828"></a>00828                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klFillHolesFunctor : ippiFloodFillGetSize failed.&quot;</span>;
<a name="l00829"></a>00829             }
<a name="l00830"></a>00830             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* ippworkbuffer = ippsMalloc_8u(workAreaSize);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832             <span class="keywordflow">if</span>(!ippworkbuffer)
<a name="l00833"></a>00833             {
<a name="l00834"></a>00834                 ippiFree(ippworkbuffer);   
<a name="l00835"></a>00835                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klFillHolesFunctor : ipp memory error&quot;</span>;
<a name="l00836"></a>00836             }
<a name="l00837"></a>00837             IppiConnectedComp regionInfo;
<a name="l00838"></a>00838             IppiPoint seed = { 0, 0 };
<a name="l00839"></a>00839             status = ippiFloodFill_4Con_8u_C1IR(tempBuffer, tempBufferLineStride,   tempBufferSize, seed,
<a name="l00840"></a>00840                 <a class="code" href="classkl_fill_holes_functor.html#a25c550c97df45fd8d5a11931e993868f">foregroundcolor</a>,  &amp;regionInfo,ippworkbuffer);
<a name="l00841"></a>00841 
<a name="l00842"></a>00842             <span class="keywordflow">if</span> (status != ippStsNoErr) 
<a name="l00843"></a>00843             {
<a name="l00844"></a>00844                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klFillHolesFunctor : ippiFloodFill failed.&quot;</span>;
<a name="l00845"></a>00845             }
<a name="l00846"></a>00846             status = ippiNot_8u_C1IR(tempBuffer + tempBufferLineStride + 1, tempBufferLineStride,   roiSize );
<a name="l00847"></a>00847 
<a name="l00848"></a>00848             <span class="keywordflow">if</span> (status != ippStsNoErr) 
<a name="l00849"></a>00849             {
<a name="l00850"></a>00850                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klFillHolesFunctor : ippiNot failed.&quot;</span>;
<a name="l00851"></a>00851             }
<a name="l00852"></a>00852 
<a name="l00853"></a>00853             status = ippiOr_8u_C1IR( source, sourceStride,  tempBuffer + tempBufferLineStride + 1, 
<a name="l00854"></a>00854                 tempBufferLineStride, roiSize   );
<a name="l00855"></a>00855 
<a name="l00856"></a>00856             <span class="comment">//savePPM_SingleBand (&quot;HOLE_FILL_DIAGNOSTIC_fillBuffer.pgm&quot;,fillBuffer-&gt;width(),fillBuffer-&gt;height(),fillBuffer-&gt;buffer());</span>
<a name="l00857"></a>00857             <span class="comment">//savePPM_SingleBand (&quot;HOLE_FILL_DIAGNOSTIC_src.pgm&quot;,src-&gt;width(),src-&gt;height(),src-&gt;buffer());</span>
<a name="l00858"></a>00858             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* outbuf=<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;buffer();
<a name="l00859"></a>00859             <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;numBands();
<a name="l00860"></a>00860             <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;width();
<a name="l00861"></a>00861             <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;height(); 
<a name="l00862"></a>00862             <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;bandStride();
<a name="l00863"></a>00863             <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;xStride();
<a name="l00864"></a>00864             <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>-&gt;yStride();
<a name="l00865"></a>00865             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* inbuf = tempBuffer + tempBufferLineStride + 1;
<a name="l00866"></a>00866             <span class="keywordtype">size_t</span> inyStride=tempBufferLineStride;
<a name="l00867"></a>00867             <span class="keywordtype">unsigned</span> i,j;
<a name="l00868"></a>00868             <span class="keywordflow">for</span>(i=0;i&lt;outheight;i++)
<a name="l00869"></a>00869             {
<a name="l00870"></a>00870                 <span class="keywordflow">for</span>(j=0;j&lt;outwidth;j++)
<a name="l00871"></a>00871                 {
<a name="l00872"></a>00872                     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> x,y;
<a name="l00873"></a>00873                     x=*(outbuf+i*outyStride+j);
<a name="l00874"></a>00874                     y=*(inbuf+i*inyStride+j);
<a name="l00875"></a>00875                     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> z= x|y;
<a name="l00876"></a>00876                     *(outbuf+i*outyStride+j)=z;
<a name="l00877"></a>00877                 }
<a name="l00878"></a>00878             }
<a name="l00879"></a>00879 
<a name="l00880"></a>00880             <span class="keywordflow">if</span> (status != ippStsNoErr) {
<a name="l00881"></a>00881                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;ippiOr failed.&quot;</span>;
<a name="l00882"></a>00882             }
<a name="l00883"></a>00883             <span class="comment">//savePPM_SingleBand (&quot;HOLE_FILL_DIAGNOSTIC_srcPostCopy.pgm&quot;,src-&gt;width(),src-&gt;height(),src-&gt;buffer());</span>
<a name="l00884"></a>00884 
<a name="l00885"></a>00885         }<span class="comment">//end unsigned char impl</span>
<a name="l00886"></a>00886 
<a name="l00887"></a>00887         <span class="comment">//float impl</span>
<a name="l00888"></a>00888     }
<a name="l00889"></a><a class="code" href="classkl_fill_holes_functor.html#adcc30e85b872be8d715ed0ec8d6e976c">00889</a>     TYPE <a class="code" href="classkl_fill_holes_functor.html#adcc30e85b872be8d715ed0ec8d6e976c">backgroundcolor</a>;
<a name="l00890"></a><a class="code" href="classkl_fill_holes_functor.html#a25c550c97df45fd8d5a11931e993868f">00890</a>     TYPE <a class="code" href="classkl_fill_holes_functor.html#a25c550c97df45fd8d5a11931e993868f">foregroundcolor</a>;
<a name="l00891"></a><a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">00891</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_fill_holes_functor.html#ae847169e5664cf196a76112800e0e3fb">src</a>;
<a name="l00892"></a>00892 };
<a name="l00893"></a>00893 
<a name="l00894"></a>00894 
<a name="l00895"></a><a class="code" href="classkl_erode_functor.html">00895</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_erode_functor.html">klErodeFunctor</a>
<a name="l00896"></a>00896 {
<a name="l00897"></a>00897 <span class="keyword">public</span>:
<a name="l00898"></a>00898     <span class="comment">//Supports float and unsigned char data types, 1 and three band images.</span>
<a name="l00899"></a>00899     <span class="comment">//In place operation is achieved by passing the source buffer into the destination parameter.</span>
<a name="l00900"></a><a class="code" href="classkl_erode_functor.html#a25f1b1aa77e3a988d5d9effcb3a3d339">00900</a>     <a class="code" href="classkl_erode_functor.html#a25f1b1aa77e3a988d5d9effcb3a3d339">klErodeFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst,  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* lkernel, <span class="keywordtype">unsigned</span> lkernelWidth, <span class="keywordtype">unsigned</span> lkernelHeight)
<a name="l00901"></a>00901         : <a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>(lsrc), <a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>(ldst), <a class="code" href="classkl_erode_functor.html#a5d8c46cdc3881d6487ea3cf7e6685dd6">kernel</a>(lkernel), <a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">kernelWidth</a>(lkernelWidth), <a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">kernelHeight</a>(lkernelHeight)
<a name="l00902"></a>00902     {
<a name="l00903"></a>00903 
<a name="l00904"></a>00904     }
<a name="l00905"></a>00905 
<a name="l00906"></a><a class="code" href="classkl_erode_functor.html#ac77967d7ce54ebd8451ff9a99086f5dc">00906</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_erode_functor.html#ac77967d7ce54ebd8451ff9a99086f5dc">operator()</a>(<span class="keywordtype">void</span>){
<a name="l00907"></a>00907 
<a name="l00908"></a>00908         <span class="keywordflow">if</span>(<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;numBands() !=1 &amp;&amp; <a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;numBands()!=3)
<a name="l00909"></a>00909             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klErodeFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l00910"></a>00910 
<a name="l00911"></a>00911         <span class="keywordtype">unsigned</span> x0=2*<a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">kernelWidth</a>;
<a name="l00912"></a>00912         <span class="keywordtype">unsigned</span> y0=2*<a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">kernelHeight</a>;     
<a name="l00913"></a>00913 
<a name="l00914"></a>00914         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* outbuf=<a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;buffer();
<a name="l00915"></a>00915         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;numBands();
<a name="l00916"></a>00916         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;width();
<a name="l00917"></a>00917         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;height(); 
<a name="l00918"></a>00918         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;bandStride();
<a name="l00919"></a>00919         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;xStride();
<a name="l00920"></a>00920         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;yStride();
<a name="l00921"></a>00921 
<a name="l00922"></a>00922         <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> paddst=<span class="keyword">new</span> <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;TYPE&gt;</a>(<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;width()+2*x0,<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;height()+2*y0,<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;numBands()); 
<a name="l00923"></a>00923 
<a name="l00924"></a>00924         <a class="code" href="structkl_pad_functor_1_1pad_rect.html">klPadFunctor::padRect</a> padRect(x0, y0, <a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;width(),<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;height());
<a name="l00925"></a>00925 
<a name="l00926"></a>00926         <a class="code" href="classkl_pad_functor.html">klPadFunctor</a> padFn(<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>, paddst, klPadFunctor::padType::PAD_TYPE_MIRROR, padRect); 
<a name="l00927"></a>00927 
<a name="l00928"></a>00928         <span class="keywordtype">unsigned</span> padOffset=(paddst-&gt;yStride() * padRect.y0+ padRect.x0 *<a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>-&gt;xStride()  );
<a name="l00929"></a>00929 
<a name="l00930"></a>00930         padFn();
<a name="l00931"></a>00931 
<a name="l00932"></a>00932         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcbuf=<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;buffer();
<a name="l00933"></a>00933 
<a name="l00934"></a>00934         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* inbuf=paddst-&gt;buffer();
<a name="l00935"></a>00935         <span class="keywordtype">size_t</span> inbands=paddst-&gt;numBands();
<a name="l00936"></a>00936         <span class="keywordtype">size_t</span> inwidth =paddst-&gt;width();
<a name="l00937"></a>00937         <span class="keywordtype">size_t</span> inheight=paddst-&gt;height(); 
<a name="l00938"></a>00938         <span class="keywordtype">size_t</span> inbandStride=paddst-&gt;bandStride();
<a name="l00939"></a>00939         <span class="keywordtype">size_t</span> inxStride =paddst-&gt;xStride();
<a name="l00940"></a>00940         <span class="keywordtype">size_t</span> inyStride= paddst-&gt;yStride();
<a name="l00941"></a>00941 
<a name="l00942"></a>00942         IppStatus  ippStatusResult;
<a name="l00943"></a>00943 
<a name="l00944"></a>00944         IppiSize dstRoiSize;
<a name="l00945"></a>00945 
<a name="l00946"></a>00946         dstRoiSize.width=<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;width();
<a name="l00947"></a>00947 
<a name="l00948"></a>00948         dstRoiSize.height=<a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>-&gt;height();
<a name="l00949"></a>00949 
<a name="l00950"></a>00950         IppiSize kernelSize;
<a name="l00951"></a>00951 
<a name="l00952"></a>00952         kernelSize.width=<a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">kernelWidth</a>;
<a name="l00953"></a>00953 
<a name="l00954"></a>00954         kernelSize.height=<a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">kernelHeight</a>;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956         <span class="keywordtype">unsigned</span> anchorX=((int)floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">kernelWidth</a>/2)%2==0) ? floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">kernelWidth</a>/2)+1 : floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">kernelWidth</a>/2) ;
<a name="l00957"></a>00957 
<a name="l00958"></a>00958         <span class="keywordtype">unsigned</span> anchorY=((int)floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">kernelHeight</a>/2)%2==0) ? floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">kernelHeight</a>/2)+1 : floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">kernelHeight</a>/2) ; 
<a name="l00959"></a>00959 
<a name="l00960"></a>00960         IppiPoint anchor;
<a name="l00961"></a>00961 
<a name="l00962"></a>00962         anchor.x=anchorX;
<a name="l00963"></a>00963 
<a name="l00964"></a>00964         anchor.y=anchorY;
<a name="l00965"></a>00965 
<a name="l00966"></a>00966         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l00967"></a>00967         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pkernel=<a class="code" href="classkl_erode_functor.html#a5d8c46cdc3881d6487ea3cf7e6685dd6">kernel</a>;
<a name="l00968"></a>00968         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l00969"></a>00969         {
<a name="l00970"></a>00970             <span class="keywordflow">switch</span>(inbands)
<a name="l00971"></a>00971             {
<a name="l00972"></a>00972             <span class="keywordflow">case</span>(1):
<a name="l00973"></a>00973                 {
<a name="l00974"></a>00974                     <span class="keywordflow">if</span>(srcbuf==outbuf)
<a name="l00975"></a>00975                         ippStatusResult= ippiErode_32f_C1IR((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l00976"></a>00976                         dstRoiSize, pkernel, kernelSize, anchor);
<a name="l00977"></a>00977                     <span class="keywordflow">else</span>
<a name="l00978"></a>00978                         ippStatusResult= ippiErode_32f_C1R((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l00979"></a>00979                         (<span class="keywordtype">float</span>*)outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l00980"></a>00980                     <span class="keywordflow">break</span>;
<a name="l00981"></a>00981 
<a name="l00982"></a>00982                 }
<a name="l00983"></a>00983             <span class="keywordflow">case</span>(3):
<a name="l00984"></a>00984                 {
<a name="l00985"></a>00985                     <span class="keywordflow">if</span>(srcbuf==outbuf)
<a name="l00986"></a>00986                         ippStatusResult=ippiErode_32f_C3IR((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l00987"></a>00987                         dstRoiSize, pkernel, kernelSize, anchor);
<a name="l00988"></a>00988                     <span class="keywordflow">else</span>
<a name="l00989"></a>00989                         ippStatusResult=ippiErode_32f_C3R((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l00990"></a>00990                         (<span class="keywordtype">float</span>*)outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l00991"></a>00991                     <span class="keywordflow">break</span>;
<a name="l00992"></a>00992 
<a name="l00993"></a>00993                 }
<a name="l00994"></a>00994             }<span class="comment">//end switch inbands</span>
<a name="l00995"></a>00995         }<span class="comment">//end float case</span>
<a name="l00996"></a>00996         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>))
<a name="l00997"></a>00997         {
<a name="l00998"></a>00998 
<a name="l00999"></a>00999             <span class="keywordflow">switch</span>(inbands)
<a name="l01000"></a>01000             {
<a name="l01001"></a>01001             <span class="keywordflow">case</span>(1):
<a name="l01002"></a>01002                 {
<a name="l01003"></a>01003                     ippStatusResult=ippiErode_8u_C1R(inbuf+padOffset, inyStride,
<a name="l01004"></a>01004                         outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01005"></a>01005                     <span class="keywordflow">break</span>;
<a name="l01006"></a>01006 
<a name="l01007"></a>01007                 }
<a name="l01008"></a>01008             <span class="keywordflow">case</span>(3):
<a name="l01009"></a>01009                 {
<a name="l01010"></a>01010                     <span class="keywordflow">if</span>(srcbuf==outbuf)
<a name="l01011"></a>01011                         ippStatusResult=ippiErode_8u_C3IR(inbuf+padOffset, inyStride,
<a name="l01012"></a>01012                         dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01013"></a>01013                     <span class="keywordflow">else</span>
<a name="l01014"></a>01014                         ippStatusResult=ippiErode_8u_C3R(inbuf+padOffset, inyStride,
<a name="l01015"></a>01015                         outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01016"></a>01016                     <span class="keywordflow">break</span>;
<a name="l01017"></a>01017 
<a name="l01018"></a>01018                 }
<a name="l01019"></a>01019             }<span class="comment">//end switch inbands</span>
<a name="l01020"></a>01020 
<a name="l01021"></a>01021             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01022"></a>01022                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klErodeFunctor : ipp status error in Erode routine.&quot;</span>;
<a name="l01023"></a>01023 
<a name="l01024"></a>01024         }<span class="comment">//end unsigned char case</span>
<a name="l01025"></a>01025         <span class="keywordflow">else</span>
<a name="l01026"></a>01026             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klErodeFunctor : unsupported data type, float and unsigned int supported at this time.&quot;</span>;
<a name="l01027"></a>01027 
<a name="l01028"></a>01028     }<span class="comment">//end operator() </span>
<a name="l01029"></a>01029 
<a name="l01030"></a><a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">01030</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_erode_functor.html#acca574814bf6171dd6e3220bc75b89bc">src</a>;
<a name="l01031"></a><a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">01031</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_erode_functor.html#a493f7b63f7c27f05b08b0b1a3d335e4f">dst</a>;
<a name="l01032"></a><a class="code" href="classkl_erode_functor.html#a5d8c46cdc3881d6487ea3cf7e6685dd6">01032</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="classkl_erode_functor.html#a5d8c46cdc3881d6487ea3cf7e6685dd6">kernel</a>;
<a name="l01033"></a><a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">01033</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_erode_functor.html#a906927c8d1719d73479f648a9b22255c">kernelWidth</a>;
<a name="l01034"></a><a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">01034</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_erode_functor.html#afa7e450bd44ed6f8e076adda66514b4f">kernelHeight</a>;
<a name="l01035"></a>01035 
<a name="l01036"></a>01036 };
<a name="l01037"></a>01037 
<a name="l01038"></a><a class="code" href="classkl_dilate_functor.html">01038</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_dilate_functor.html">klDilateFunctor</a>{
<a name="l01039"></a>01039 <span class="keyword">public</span>:
<a name="l01040"></a>01040     <span class="comment">//Supports float and unsigned char data types, 1 and three band images.</span>
<a name="l01041"></a>01041     <span class="comment">//In place operation is achieved by passing the source buffer into the destination parameter.</span>
<a name="l01042"></a><a class="code" href="classkl_dilate_functor.html#aaab9baaeb29f4b95f6f463038c2d5154">01042</a>     <a class="code" href="classkl_dilate_functor.html#aaab9baaeb29f4b95f6f463038c2d5154">klDilateFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst,  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* lkernel, <span class="keywordtype">unsigned</span> lkernelWidth, <span class="keywordtype">unsigned</span> lkernelHeight)
<a name="l01043"></a>01043         : <a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>(lsrc), <a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>(ldst), <a class="code" href="classkl_dilate_functor.html#a9712a259dbc4178a8947664a0c585048">kernel</a>(lkernel), <a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">kernelWidth</a>(lkernelWidth), <a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">kernelHeight</a>(lkernelHeight)
<a name="l01044"></a>01044     {
<a name="l01045"></a>01045 
<a name="l01046"></a>01046     }
<a name="l01047"></a>01047 
<a name="l01048"></a><a class="code" href="classkl_dilate_functor.html#af703e380eab8ba50309c2151b36d132b">01048</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_dilate_functor.html#af703e380eab8ba50309c2151b36d132b">operator()</a>(<span class="keywordtype">void</span>){
<a name="l01049"></a>01049 
<a name="l01050"></a>01050         <span class="keywordflow">if</span>(<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;numBands() !=1 &amp;&amp; <a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;numBands()!=3)
<a name="l01051"></a>01051             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klDilateFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l01052"></a>01052 
<a name="l01053"></a>01053         <span class="keywordtype">unsigned</span> x0=2*<a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">kernelWidth</a>;
<a name="l01054"></a>01054         <span class="keywordtype">unsigned</span> y0=2*<a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">kernelHeight</a>;
<a name="l01055"></a>01055 
<a name="l01056"></a>01056         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* outbuf=<a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;buffer();
<a name="l01057"></a>01057         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;numBands();
<a name="l01058"></a>01058         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;width();
<a name="l01059"></a>01059         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;height(); 
<a name="l01060"></a>01060         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;bandStride();
<a name="l01061"></a>01061         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;xStride();
<a name="l01062"></a>01062         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;yStride();
<a name="l01063"></a>01063 
<a name="l01064"></a>01064         <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> paddst=<span class="keyword">new</span> <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;TYPE&gt;</a>(<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;width()+2*x0,<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;height()+2*y0,<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;numBands());  
<a name="l01065"></a>01065 
<a name="l01066"></a>01066         <a class="code" href="structkl_pad_functor_1_1pad_rect.html">klPadFunctor::padRect</a> padRect(x0, y0, <a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;width(),<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;height());
<a name="l01067"></a>01067 
<a name="l01068"></a>01068         <a class="code" href="classkl_pad_functor.html">klPadFunctor</a> padFn(<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>, paddst, klPadFunctor::padType::PAD_TYPE_MIRROR, padRect);
<a name="l01069"></a>01069 
<a name="l01070"></a>01070         <span class="keywordtype">unsigned</span> padOffset=(paddst-&gt;yStride() * padRect.y0+ padRect.x0 *<a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>-&gt;xStride()  );
<a name="l01071"></a>01071 
<a name="l01072"></a>01072         padFn();
<a name="l01073"></a>01073 
<a name="l01074"></a>01074         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcbuf=<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;buffer();
<a name="l01075"></a>01075 
<a name="l01076"></a>01076         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* inbuf=paddst-&gt;buffer();
<a name="l01077"></a>01077         <span class="keywordtype">size_t</span> inbands=paddst-&gt;numBands();
<a name="l01078"></a>01078         <span class="keywordtype">size_t</span> inwidth =paddst-&gt;width();
<a name="l01079"></a>01079         <span class="keywordtype">size_t</span> inheight=paddst-&gt;height(); 
<a name="l01080"></a>01080         <span class="keywordtype">size_t</span> inbandStride=paddst-&gt;bandStride();
<a name="l01081"></a>01081         <span class="keywordtype">size_t</span> inxStride =paddst-&gt;xStride();
<a name="l01082"></a>01082         <span class="keywordtype">size_t</span> inyStride= paddst-&gt;yStride();
<a name="l01083"></a>01083 
<a name="l01084"></a>01084         IppStatus  ippStatusResult;
<a name="l01085"></a>01085 
<a name="l01086"></a>01086         IppiSize dstRoiSize;
<a name="l01087"></a>01087 
<a name="l01088"></a>01088         dstRoiSize.width=<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;width();
<a name="l01089"></a>01089 
<a name="l01090"></a>01090         dstRoiSize.height=<a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>-&gt;height();
<a name="l01091"></a>01091 
<a name="l01092"></a>01092         IppiSize kernelSize;
<a name="l01093"></a>01093 
<a name="l01094"></a>01094         kernelSize.width=<a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">kernelWidth</a>;
<a name="l01095"></a>01095 
<a name="l01096"></a>01096         kernelSize.height=<a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">kernelHeight</a>;
<a name="l01097"></a>01097 
<a name="l01098"></a>01098 
<a name="l01099"></a>01099         <span class="keywordtype">unsigned</span> anchorX=((int)floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">kernelWidth</a>/2)%2==0) ? floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">kernelWidth</a>/2)+1 : floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">kernelWidth</a>/2) ; 
<a name="l01100"></a>01100 
<a name="l01101"></a>01101         <span class="keywordtype">unsigned</span> anchorY=((int)floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">kernelHeight</a>/2)%2==0) ? floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">kernelHeight</a>/2)+1 : floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">kernelHeight</a>/2) ; 
<a name="l01102"></a>01102 
<a name="l01103"></a>01103         IppiPoint anchor;
<a name="l01104"></a>01104 
<a name="l01105"></a>01105         anchor.x=anchorX;
<a name="l01106"></a>01106 
<a name="l01107"></a>01107         anchor.y=anchorY;
<a name="l01108"></a>01108 
<a name="l01109"></a>01109         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l01110"></a>01110 
<a name="l01111"></a>01111         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pkernel=<a class="code" href="classkl_dilate_functor.html#a9712a259dbc4178a8947664a0c585048">kernel</a>;
<a name="l01112"></a>01112         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l01113"></a>01113         {
<a name="l01114"></a>01114             <span class="keywordflow">switch</span>(inbands)
<a name="l01115"></a>01115             {
<a name="l01116"></a>01116             <span class="keywordflow">case</span>(1):
<a name="l01117"></a>01117                 {
<a name="l01118"></a>01118                     <span class="keywordflow">if</span>(srcbuf==outbuf)
<a name="l01119"></a>01119                         ippStatusResult= ippiDilate_32f_C1IR((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l01120"></a>01120                         dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01121"></a>01121                     <span class="keywordflow">else</span>
<a name="l01122"></a>01122                         ippStatusResult= ippiDilate_32f_C1R((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l01123"></a>01123                         (<span class="keywordtype">float</span>*)outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01124"></a>01124                     <span class="keywordflow">break</span>;
<a name="l01125"></a>01125 
<a name="l01126"></a>01126                 }
<a name="l01127"></a>01127             <span class="keywordflow">case</span>(3):
<a name="l01128"></a>01128                 {
<a name="l01129"></a>01129                     <span class="keywordflow">if</span>(srcbuf==outbuf)
<a name="l01130"></a>01130                         ippStatusResult=ippiDilate_32f_C3IR((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l01131"></a>01131                         dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01132"></a>01132                     <span class="keywordflow">else</span>
<a name="l01133"></a>01133                         ippStatusResult=ippiDilate_32f_C3R((<span class="keywordtype">float</span>*)inbuf+padOffset, inyStride,
<a name="l01134"></a>01134                         (<span class="keywordtype">float</span>*)outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01135"></a>01135                     <span class="keywordflow">break</span>;
<a name="l01136"></a>01136 
<a name="l01137"></a>01137                 }
<a name="l01138"></a>01138             }<span class="comment">//end switch inbands</span>
<a name="l01139"></a>01139 
<a name="l01140"></a>01140         }<span class="comment">//end float case</span>
<a name="l01141"></a>01141         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>))
<a name="l01142"></a>01142         {
<a name="l01143"></a>01143 
<a name="l01144"></a>01144             <span class="keywordflow">switch</span>(inbands)
<a name="l01145"></a>01145             {
<a name="l01146"></a>01146             <span class="keywordflow">case</span>(1):
<a name="l01147"></a>01147                 {
<a name="l01148"></a>01148                     ippStatusResult=ippiDilate_8u_C1R(inbuf+padOffset, inyStride,
<a name="l01149"></a>01149                         outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01150"></a>01150                     <span class="keywordflow">break</span>;
<a name="l01151"></a>01151                 }
<a name="l01152"></a>01152             <span class="keywordflow">case</span>(3):
<a name="l01153"></a>01153                 {
<a name="l01154"></a>01154                     <span class="keywordflow">if</span>(srcbuf==outbuf)
<a name="l01155"></a>01155                         ippStatusResult=ippiDilate_8u_C3IR(inbuf+padOffset, inyStride,
<a name="l01156"></a>01156                         dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01157"></a>01157                     <span class="keywordflow">else</span>
<a name="l01158"></a>01158                         ippStatusResult=ippiDilate_8u_C3R(inbuf+padOffset, inyStride,
<a name="l01159"></a>01159                         outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);
<a name="l01160"></a>01160                     <span class="keywordflow">break</span>;
<a name="l01161"></a>01161                 }
<a name="l01162"></a>01162             }<span class="comment">//end switch inbands</span>
<a name="l01163"></a>01163 
<a name="l01164"></a>01164             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01165"></a>01165                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klDilateFunctor : ipp status error in dilate routine.&quot;</span>;
<a name="l01166"></a>01166 
<a name="l01167"></a>01167         }<span class="comment">//end unsigned char case</span>
<a name="l01168"></a>01168         <span class="keywordflow">else</span>
<a name="l01169"></a>01169             <span class="keywordflow">throw</span> <span class="stringliteral">&quot; : klDilateFunctor : unsupported data type, float and unsigned int supported at this time.&quot;</span>;
<a name="l01170"></a>01170 
<a name="l01171"></a>01171     }<span class="comment">//end operator() </span>
<a name="l01172"></a>01172 
<a name="l01173"></a><a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">01173</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_dilate_functor.html#a069872c2a8b9f335afe77f57ee394966">src</a>;
<a name="l01174"></a><a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">01174</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_dilate_functor.html#a872c669cc11a9301d2338bc1df3a7534">dst</a>;
<a name="l01175"></a><a class="code" href="classkl_dilate_functor.html#a9712a259dbc4178a8947664a0c585048">01175</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="classkl_dilate_functor.html#a9712a259dbc4178a8947664a0c585048">kernel</a>;
<a name="l01176"></a><a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">01176</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_dilate_functor.html#a295e3d9b9a221065a1348ea320348af3">kernelWidth</a>;
<a name="l01177"></a><a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">01177</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_dilate_functor.html#aa2d44ea4f05a4ef85d834001701dc0e2">kernelHeight</a>;
<a name="l01178"></a>01178 
<a name="l01179"></a>01179 };
<a name="l01180"></a>01180 
<a name="l01181"></a><a class="code" href="classkl_open_functor.html">01181</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_open_functor.html">klOpenFunctor</a>
<a name="l01182"></a>01182 {
<a name="l01183"></a>01183 <span class="keyword">public</span>:
<a name="l01184"></a>01184     <span class="comment">//Supports float and unsigned char data types, 1 and three band images.</span>
<a name="l01185"></a>01185     <span class="comment">//In place operation is achieved by passing the source buffer into the destination parameter.</span>
<a name="l01186"></a><a class="code" href="classkl_open_functor.html#a1d75eb219c7bf882f127dc10f8948051">01186</a>     <a class="code" href="classkl_open_functor.html#a1d75eb219c7bf882f127dc10f8948051">klOpenFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst,  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* lkernel, <span class="keywordtype">unsigned</span> lkernelWidth, <span class="keywordtype">unsigned</span> lkernelHeight)
<a name="l01187"></a>01187         : <a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>(lsrc), <a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>(ldst), <a class="code" href="classkl_open_functor.html#a81ad7cfd2492bfd77bd691f30d4ee010">kernel</a>(lkernel), <a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">kernelWidth</a>(lkernelWidth), <a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">kernelHeight</a>(lkernelHeight)
<a name="l01188"></a>01188     {
<a name="l01189"></a>01189 
<a name="l01190"></a>01190     }
<a name="l01191"></a>01191 
<a name="l01192"></a><a class="code" href="classkl_open_functor.html#abfe6a412bfeca3b13296653d4e43bf20">01192</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_open_functor.html#abfe6a412bfeca3b13296653d4e43bf20">operator()</a>(<span class="keywordtype">void</span>)
<a name="l01193"></a>01193     {
<a name="l01194"></a>01194 
<a name="l01195"></a>01195         <span class="keywordflow">if</span>(<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;numBands() !=1 &amp;&amp; <a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;numBands()!=3)
<a name="l01196"></a>01196             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klErodeFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l01197"></a>01197 
<a name="l01198"></a>01198         <span class="keywordtype">unsigned</span> x0=2*<a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">kernelWidth</a>;
<a name="l01199"></a>01199         <span class="keywordtype">unsigned</span> y0=2*<a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">kernelHeight</a>;     
<a name="l01200"></a>01200 
<a name="l01201"></a>01201         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* outbuf=<a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;buffer();
<a name="l01202"></a>01202         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;numBands();
<a name="l01203"></a>01203         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;width();
<a name="l01204"></a>01204         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;height(); 
<a name="l01205"></a>01205         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;bandStride();
<a name="l01206"></a>01206         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;xStride();
<a name="l01207"></a>01207         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;yStride();
<a name="l01208"></a>01208 
<a name="l01209"></a>01209         <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> paddst=<span class="keyword">new</span> <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;TYPE&gt;</a>(<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;width()+2*x0,<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;height()+2*y0,<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;numBands()); 
<a name="l01210"></a>01210 
<a name="l01211"></a>01211         <a class="code" href="structkl_pad_functor_1_1pad_rect.html">klPadFunctor::padRect</a> padRect(x0, y0, <a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;width(),<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;height());
<a name="l01212"></a>01212 
<a name="l01213"></a>01213         <a class="code" href="classkl_pad_functor.html">klPadFunctor</a> padFn(<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>, paddst, klPadFunctor::padType::PAD_TYPE_MIRROR, padRect); 
<a name="l01214"></a>01214 
<a name="l01215"></a>01215         <span class="keywordtype">unsigned</span> padOffset=(paddst-&gt;yStride() * padRect.y0+ padRect.x0 *<a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>-&gt;xStride()  );
<a name="l01216"></a>01216 
<a name="l01217"></a>01217         padFn();
<a name="l01218"></a>01218 
<a name="l01219"></a>01219         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcbuf=<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;buffer();
<a name="l01220"></a>01220 
<a name="l01221"></a>01221         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* inbuf=paddst-&gt;buffer();
<a name="l01222"></a>01222         <span class="keywordtype">size_t</span> inbands=paddst-&gt;numBands();
<a name="l01223"></a>01223         <span class="keywordtype">size_t</span> inwidth =paddst-&gt;width();
<a name="l01224"></a>01224         <span class="keywordtype">size_t</span> inheight=paddst-&gt;height(); 
<a name="l01225"></a>01225         <span class="keywordtype">size_t</span> inbandStride=paddst-&gt;bandStride();
<a name="l01226"></a>01226         <span class="keywordtype">size_t</span> inxStride =paddst-&gt;xStride();
<a name="l01227"></a>01227         <span class="keywordtype">size_t</span> inyStride= paddst-&gt;yStride();
<a name="l01228"></a>01228 
<a name="l01229"></a>01229         IppStatus  ippStatusResult;
<a name="l01230"></a>01230 
<a name="l01231"></a>01231         IppiSize dstRoiSize;
<a name="l01232"></a>01232 
<a name="l01233"></a>01233         dstRoiSize.width=<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;width();
<a name="l01234"></a>01234 
<a name="l01235"></a>01235         dstRoiSize.height=<a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>-&gt;height();
<a name="l01236"></a>01236 
<a name="l01237"></a>01237         IppiSize kernelSize;
<a name="l01238"></a>01238 
<a name="l01239"></a>01239         kernelSize.width=<a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">kernelWidth</a>;
<a name="l01240"></a>01240 
<a name="l01241"></a>01241         kernelSize.height=<a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">kernelHeight</a>;
<a name="l01242"></a>01242 
<a name="l01243"></a>01243         <span class="keywordtype">unsigned</span> anchorX=((int)floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">kernelWidth</a>/2)%2==0) ? floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">kernelWidth</a>/2)+1 : floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">kernelWidth</a>/2) ;
<a name="l01244"></a>01244 
<a name="l01245"></a>01245         <span class="keywordtype">unsigned</span> anchorY=((int)floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">kernelHeight</a>/2)%2==0) ? floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">kernelHeight</a>/2)+1 : floor((<span class="keywordtype">double</span>)<a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">kernelHeight</a>/2) ; 
<a name="l01246"></a>01246 
<a name="l01247"></a>01247         IppiPoint anchor;
<a name="l01248"></a>01248 
<a name="l01249"></a>01249         anchor.x=anchorX;
<a name="l01250"></a>01250 
<a name="l01251"></a>01251         anchor.y=anchorY;
<a name="l01252"></a>01252 
<a name="l01253"></a>01253         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l01254"></a>01254         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pkernel=<a class="code" href="classkl_open_functor.html#a81ad7cfd2492bfd77bd691f30d4ee010">kernel</a>;
<a name="l01255"></a>01255 
<a name="l01256"></a>01256 
<a name="l01257"></a>01257 
<a name="l01258"></a>01258         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l01259"></a>01259         {
<a name="l01260"></a>01260             <span class="keywordflow">switch</span>(inbands)
<a name="l01261"></a>01261             {
<a name="l01262"></a>01262             <span class="keywordflow">case</span>(1):
<a name="l01263"></a>01263                 {
<a name="l01264"></a>01264                 
<a name="l01265"></a>01265                 <span class="comment">/*      ippStatusResult= ippiMorphOpenBorder_32f_C1R((float*)inbuf+padOffset, inyStride,</span>
<a name="l01266"></a>01266 <span class="comment">                        (float*)outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);*/</span>
<a name="l01267"></a>01267                     <span class="keywordflow">break</span>;
<a name="l01268"></a>01268 
<a name="l01269"></a>01269                 }
<a name="l01270"></a>01270             <span class="keywordflow">case</span>(3):
<a name="l01271"></a>01271                 {
<a name="l01272"></a>01272 
<a name="l01273"></a>01273     
<a name="l01274"></a>01274                         <span class="comment">//ippStatusResult=ippiMorphOpenBorder_32f_C3R((float*)inbuf+padOffset, inyStride,</span>
<a name="l01275"></a>01275                         <span class="comment">//(float*)outbuf, outyStride, dstRoiSize, pkernel, kernelSize, anchor);</span>
<a name="l01276"></a>01276                     <span class="keywordflow">break</span>;
<a name="l01277"></a>01277 
<a name="l01278"></a>01278                 }
<a name="l01279"></a>01279             }<span class="comment">//end switch inbands</span>
<a name="l01280"></a>01280         }<span class="comment">//end float case</span>
<a name="l01281"></a>01281         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char))
<a name="l01282"></a>01282         {
<a name="l01283"></a>01283 
<a name="l01284"></a>01284             <span class="keywordflow">switch</span>(inbands)
<a name="l01285"></a>01285             {
<a name="l01286"></a>01286             <span class="keywordflow">case</span>(1):
<a name="l01287"></a>01287                 {   
<a name="l01288"></a>01288                     IppiMorphAdvState* pState;  
<a name="l01289"></a>01289                     <span class="keywordtype">int</span> pSize;
<a name="l01290"></a>01290                     IppStatus status =ippiMorphAdvGetSize_8u_C1R( dstRoiSize, pkernel, kernelSize, &amp;pSize);
<a name="l01291"></a>01291         
<a name="l01292"></a>01292                     <span class="comment">//(int roiWidth, const Ipp8u* pMask, IppiSize maskSize,  IppiPoint anchor, IppiMorphState* pState))</span>
<a name="l01293"></a>01293 
<a name="l01294"></a>01294                      status =ippiMorphAdvInitAlloc_8u_C1R( &amp;pState, dstRoiSize, pkernel,  kernelSize, anchor);
<a name="l01295"></a>01295 
<a name="l01296"></a>01296                      ippStatusResult= ippiMorphOpenBorder_8u_C1R(inbuf+padOffset, inyStride,outbuf, outyStride, dstRoiSize, ippBorderRepl,pState);
<a name="l01297"></a>01297 
<a name="l01298"></a>01298                     <span class="keywordflow">break</span>;
<a name="l01299"></a>01299 
<a name="l01300"></a>01300                 }
<a name="l01301"></a>01301             <span class="keywordflow">case</span>(3):
<a name="l01302"></a>01302                 
<a name="l01303"></a>01303                 {   IppiMorphAdvState* pState;  
<a name="l01304"></a>01304                     <span class="keywordtype">int</span> pSize;
<a name="l01305"></a>01305                     IppStatus status =ippiMorphAdvGetSize_8u_C3R( dstRoiSize, pkernel, kernelSize, &amp;pSize);
<a name="l01306"></a>01306         
<a name="l01307"></a>01307                      status =ippiMorphAdvInitAlloc_8u_C3R( &amp;pState, dstRoiSize, pkernel,  kernelSize, anchor);
<a name="l01308"></a>01308 
<a name="l01309"></a>01309 
<a name="l01310"></a>01310                     ippStatusResult= ippiMorphOpenBorder_8u_C3R(inbuf+padOffset, inyStride,outbuf, outyStride, dstRoiSize, ippBorderRepl,pState);
<a name="l01311"></a>01311 
<a name="l01312"></a>01312 
<a name="l01313"></a>01313                     <span class="keywordflow">break</span>;
<a name="l01314"></a>01314 
<a name="l01315"></a>01315                 }
<a name="l01316"></a>01316             }<span class="comment">//end switch inbands</span>
<a name="l01317"></a>01317 
<a name="l01318"></a>01318             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01319"></a>01319                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klErodeFunctor : ipp status error in Erode routine.&quot;</span>;
<a name="l01320"></a>01320 
<a name="l01321"></a>01321         }<span class="comment">//end unsigned char case</span>
<a name="l01322"></a>01322         <span class="keywordflow">else</span>
<a name="l01323"></a>01323             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klErodeFunctor : unsupported data type, float and unsigned int supported at this time.&quot;</span>;
<a name="l01324"></a>01324 
<a name="l01325"></a>01325     }<span class="comment">//end operator() </span>
<a name="l01326"></a>01326 
<a name="l01327"></a><a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">01327</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_open_functor.html#a43d0956c8e99d06fee3045746e848649">src</a>;
<a name="l01328"></a><a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">01328</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_open_functor.html#ae90c52ba49e02ad8712bbb77b90c242f">dst</a>;
<a name="l01329"></a><a class="code" href="classkl_open_functor.html#a81ad7cfd2492bfd77bd691f30d4ee010">01329</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code" href="classkl_open_functor.html#a81ad7cfd2492bfd77bd691f30d4ee010">kernel</a>;
<a name="l01330"></a><a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">01330</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_open_functor.html#aa511f5e3882462d33d7b9d4bb81b7c9c">kernelWidth</a>;
<a name="l01331"></a><a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">01331</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a class="code" href="classkl_open_functor.html#a9c0946d3681e37bcaa1084079b52c396">kernelHeight</a>;
<a name="l01332"></a>01332 
<a name="l01333"></a>01333 };
<a name="l01334"></a>01334 
<a name="l01335"></a><a class="code" href="classkl_resize_functor.html">01335</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_resize_functor.html">klResizeFunctor</a>
<a name="l01336"></a>01336 {
<a name="l01337"></a>01337 <span class="keyword">public</span>:
<a name="l01338"></a>01338     <span class="comment">//Supports float and unsigned char data types, 1 and three band images.</span>
<a name="l01339"></a>01339     <span class="comment">//This functor is uniqe in that the raster buffer result is returned from the operator();</span>
<a name="l01340"></a><a class="code" href="classkl_resize_functor.html#a848abb4e673de2912a84e99fe947a44b">01340</a>     <a class="code" href="classkl_resize_functor.html#a848abb4e673de2912a84e99fe947a44b">klResizeFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <span class="keywordtype">double</span> xFactor,<span class="keywordtype">double</span> yFactor,<span class="keywordtype">int</span> interpolate)
<a name="l01341"></a>01341         : <a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>(lsrc), <a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">m_xFactor</a>(xFactor), <a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">m_yFactor</a>(yFactor),<a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">m_interpolate</a>(interpolate)
<a name="l01342"></a>01342     {
<a name="l01343"></a>01343 
<a name="l01344"></a>01344     }
<a name="l01345"></a>01345     <span class="comment">// bbcrevisit - Interpolation enum - </span>
<a name="l01346"></a>01346     <span class="keyword">enum</span>{
<a name="l01347"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a00a37f4085930f4f6c2a35f518c643db">01347</a>         IPPI_INTER_NN ,IPPI_INTER_LINEAR,
<a name="l01348"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a12db88ff071199fa86ac1c11a9a33f4d">01348</a>         IPPI_INTER_CUBIC ,
<a name="l01349"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a8ed1cffcd253a6a74c5d07d951e4b42c">01349</a>         IPPI_INTER_CUBIC2P_BSPLINE, 
<a name="l01350"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5aeb3c89a8e6c39279e5205a77f290332a">01350</a>         IPPI_INTER_CUBIC2P_CATMULLROM,  <span class="comment">/* two-parameter cubic filter (B=0, C=1/2) */</span>
<a name="l01351"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a015a1e2b47036a85f611f7116c018be8">01351</a>         IPPI_INTER_CUBIC2P_B05C03,      <span class="comment">/* two-parameter cubic filter (B=1/2, C=3/10) */</span>
<a name="l01352"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a06f0664746afce631c3ae9f9fe31b82d">01352</a>         IPPI_INTER_SUPER ,
<a name="l01353"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a7c26533f74a105aefd149f74416e9a2d">01353</a>         IPPI_INTER_LANCZOS,
<a name="l01354"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5ade6e1ef1cd74ad95a7d1a193b8deed07">01354</a>         IPPI_SUBPIXEL_EDGE,
<a name="l01355"></a><a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a111dc261f483cd80c4b49f970eeea1d5">01355</a>         <a class="code" href="classkl_resize_functor.html#aa779946f630f13896df646a7419b37b5a111dc261f483cd80c4b49f970eeea1d5">IPPI_SMOOTH_EDGE</a>        
<a name="l01356"></a>01356     }<a class="code" href="classkl_resize_functor.html#a78af0218c9b62fa5328190acaf7c91bb">ResizeInterpolateFns</a>;
<a name="l01357"></a>01357 
<a name="l01358"></a><a class="code" href="classkl_resize_functor.html#a15dffa538eda98f83e2c142380e61e12">01358</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_resize_functor.html#a15dffa538eda98f83e2c142380e61e12">operator()</a>(<span class="keywordtype">void</span>)
<a name="l01359"></a>01359     {
<a name="l01360"></a>01360 
<a name="l01361"></a>01361         <span class="keywordflow">if</span>(<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;numBands() !=1 &amp;&amp; <a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;numBands()!=3)
<a name="l01362"></a>01362             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klResizeFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l01363"></a>01363 
<a name="l01364"></a>01364         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcbuf=<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;buffer();
<a name="l01365"></a>01365 
<a name="l01366"></a>01366         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* inbuf=<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;buffer();
<a name="l01367"></a>01367         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;numBands();
<a name="l01368"></a>01368         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;width();
<a name="l01369"></a>01369         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;height(); 
<a name="l01370"></a>01370         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;bandStride();
<a name="l01371"></a>01371         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;xStride();
<a name="l01372"></a>01372         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;yStride();
<a name="l01373"></a>01373 
<a name="l01374"></a>01374         IppStatus  ippStatusResult;
<a name="l01375"></a>01375 
<a name="l01376"></a>01376         IppiSize dstRoiSize;
<a name="l01377"></a>01377 
<a name="l01378"></a>01378         dstRoiSize.width=<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;width()*<a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">m_xFactor</a>;
<a name="l01379"></a>01379         dstRoiSize.height=<a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;height()*<a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">m_yFactor</a>;
<a name="l01380"></a>01380 
<a name="l01381"></a>01381         <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> dst=<span class="keyword">new</span> <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;TYPE&gt;</a>(dstRoiSize.width,dstRoiSize.height, inbands);
<a name="l01382"></a>01382 
<a name="l01383"></a>01383         IppiSize srcSize;
<a name="l01384"></a>01384         srcSize.<a class="code" href="classkl_packed_heap_raster_buffer.html#a1c1a57f455690160e825073e3b297c9c">width</a>=inwidth;
<a name="l01385"></a>01385         srcSize.<a class="code" href="classkl_packed_heap_raster_buffer.html#a700315115a5375ef88c78b311139d7d9">height</a>=inheight;
<a name="l01386"></a>01386         <span class="keywordtype">int</span> srcStep=inyStride;
<a name="l01387"></a>01387         IppiRect srcRoi;
<a name="l01388"></a>01388 
<a name="l01389"></a>01389         srcRoi.x=0; srcRoi.y=0; srcRoi.width=inwidth; srcRoi.height=inheight;
<a name="l01390"></a>01390 
<a name="l01391"></a>01391         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pDst=dst-&gt;buffer();
<a name="l01392"></a>01392 
<a name="l01393"></a>01393         <span class="keywordtype">int</span> dstStep=dst-&gt;yStride();
<a name="l01394"></a>01394 
<a name="l01395"></a>01395         IppiRect dstRoi;
<a name="l01396"></a>01396 
<a name="l01397"></a>01397         dstRoi.x=0; dstRoi.y=0; dstRoi.width=dst-&gt;width(); dstRoi.height=dst-&gt;height();
<a name="l01398"></a>01398         <span class="keywordtype">double</span> xShift=0; 
<a name="l01399"></a>01399         <span class="keywordtype">double</span> yShift=0;
<a name="l01400"></a>01400 
<a name="l01401"></a>01401         <span class="keywordtype">int</span> BufferSize=0;
<a name="l01402"></a>01402 
<a name="l01403"></a>01403         IppStatus computeBufStatus=ippStsNoErr;
<a name="l01404"></a>01404 
<a name="l01405"></a>01405         computeBufStatus    =ippiResizeGetBufSize( srcRoi,  dstRoi, <a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>-&gt;numBands(), <a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">m_interpolate</a>, &amp;BufferSize);
<a name="l01406"></a>01406 
<a name="l01407"></a>01407         Ipp8u* pBuffer= ippsMalloc_8u( BufferSize );
<a name="l01408"></a>01408 
<a name="l01409"></a>01409         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l01410"></a>01410 
<a name="l01411"></a>01411         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l01412"></a>01412         {
<a name="l01413"></a>01413             <span class="keywordflow">switch</span>(inbands)
<a name="l01414"></a>01414             {
<a name="l01415"></a>01415             <span class="keywordflow">case</span>(1):
<a name="l01416"></a>01416                 {
<a name="l01417"></a>01417                     ippStatusResult=  ippiResizeSqrPixel_32f_C1R((<span class="keywordtype">float</span>*)inbuf, srcSize,  srcStep,  srcRoi,(<span class="keywordtype">float</span>*) pDst,  dstStep,
<a name="l01418"></a>01418                         dstRoi,  <a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">m_xFactor</a>,  <a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">m_yFactor</a>,  xShift,  yShift, <a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">m_interpolate</a>, pBuffer);
<a name="l01419"></a>01419                     <span class="keywordflow">break</span>;
<a name="l01420"></a>01420                 }
<a name="l01421"></a>01421             <span class="keywordflow">case</span>(3):
<a name="l01422"></a>01422                 {
<a name="l01423"></a>01423                     ippStatusResult=  ippiResizeSqrPixel_32f_C3R((<span class="keywordtype">float</span>*)inbuf, srcSize,  srcStep,  srcRoi,(<span class="keywordtype">float</span>*) pDst,  dstStep,
<a name="l01424"></a>01424                         dstRoi,  <a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">m_xFactor</a>,  <a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">m_yFactor</a>,  xShift,  yShift, <a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">m_interpolate</a>, pBuffer);
<a name="l01425"></a>01425                     <span class="keywordflow">break</span>;
<a name="l01426"></a>01426 
<a name="l01427"></a>01427                 }
<a name="l01428"></a>01428             }<span class="comment">//end switch inbands</span>
<a name="l01429"></a>01429 
<a name="l01430"></a>01430 
<a name="l01431"></a>01431         }<span class="comment">//end float case</span>
<a name="l01432"></a>01432         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>))
<a name="l01433"></a>01433         {
<a name="l01434"></a>01434 
<a name="l01435"></a>01435             <span class="keywordflow">switch</span>(inbands)
<a name="l01436"></a>01436             {
<a name="l01437"></a>01437             <span class="keywordflow">case</span>(1):
<a name="l01438"></a>01438                 {
<a name="l01439"></a>01439                     ippStatusResult=  ippiResizeSqrPixel_8u_C1R((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)inbuf, srcSize,  srcStep,  srcRoi,(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) pDst,  dstStep,
<a name="l01440"></a>01440                         dstRoi,  <a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">m_xFactor</a>,  <a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">m_yFactor</a>,  xShift,  yShift, <a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">m_interpolate</a>, pBuffer);
<a name="l01441"></a>01441 
<a name="l01442"></a>01442                     <span class="keywordflow">break</span>;
<a name="l01443"></a>01443 
<a name="l01444"></a>01444                 }
<a name="l01445"></a>01445             <span class="keywordflow">case</span>(3):
<a name="l01446"></a>01446                 {
<a name="l01447"></a>01447                     ippStatusResult=  ippiResizeSqrPixel_8u_C3R((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)inbuf, srcSize,  srcStep,  srcRoi, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)pDst,  dstStep,
<a name="l01448"></a>01448                         dstRoi,  <a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">m_xFactor</a>,  <a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">m_yFactor</a>,  xShift,  yShift, <a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">m_interpolate</a>, pBuffer);
<a name="l01449"></a>01449                     <span class="keywordflow">break</span>;
<a name="l01450"></a>01450 
<a name="l01451"></a>01451                 }
<a name="l01452"></a>01452 
<a name="l01453"></a>01453             }<span class="comment">//end switch inbands</span>
<a name="l01454"></a>01454             <span class="keywordflow">if</span>(pBuffer)
<a name="l01455"></a>01455          {
<a name="l01456"></a>01456              ippsFree( pBuffer );
<a name="l01457"></a>01457          }
<a name="l01458"></a>01458             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01459"></a>01459             {
<a name="l01460"></a>01460                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot; klResizeFunctor : ipp status error in resize routine.&quot;</span>;
<a name="l01461"></a>01461             }
<a name="l01462"></a>01462         }<span class="comment">//end unsigned char case</span>
<a name="l01463"></a>01463         <span class="keywordflow">else</span>
<a name="l01464"></a>01464             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;  klResizeFunctor : unsupported data type, float and unsigned int supported at this time.&quot;</span>;
<a name="l01465"></a>01465         <span class="keywordflow">return</span> dst;
<a name="l01466"></a>01466 
<a name="l01467"></a>01467     }<span class="comment">//end operator() </span>
<a name="l01468"></a>01468 
<a name="l01469"></a><a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">01469</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_resize_functor.html#a988f0513ee7c199e1d1ba626cba72daf">m_src</a>;
<a name="l01470"></a>01470 
<a name="l01471"></a><a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">01471</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_resize_functor.html#af5318088a697bcb29e91a8aa1c591567">m_xFactor</a>;
<a name="l01472"></a><a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">01472</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_resize_functor.html#ae24252005e4cbc20dab1deece88e8c3f">m_yFactor</a>;
<a name="l01473"></a><a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">01473</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_resize_functor.html#a2684052257e99ad41e222287ecaddc7f">m_interpolate</a>;
<a name="l01474"></a>01474 
<a name="l01475"></a>01475 };
<a name="l01476"></a>01476 
<a name="l01477"></a><a class="code" href="classkl_rotate_functor.html">01477</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_rotate_functor.html">klRotateFunctor</a>
<a name="l01478"></a>01478 {
<a name="l01479"></a>01479 <span class="keyword">public</span>:
<a name="l01480"></a>01480     <span class="comment">//Supports float and unsigned char data types, 1 and three band images.</span>
<a name="l01481"></a>01481     <span class="comment">//This functor is uniqe in that the raster buffer result is returned from the operator();</span>
<a name="l01482"></a><a class="code" href="classkl_rotate_functor.html#a382ca1f13b7c4eb5c6c1979a1e4c0242">01482</a>     <a class="code" href="classkl_rotate_functor.html#a382ca1f13b7c4eb5c6c1979a1e4c0242">klRotateFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <span class="keywordtype">double</span> angle,<span class="keywordtype">int</span> interpolate)
<a name="l01483"></a>01483     {
<a name="l01484"></a>01484         <a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>= lsrc;
<a name="l01485"></a>01485         <a class="code" href="classkl_rotate_functor.html#a975f1dbc8dd8888bf191caf090b6f5af">m_interpolate</a>=interpolate;
<a name="l01486"></a>01486         <a class="code" href="classkl_rotate_functor.html#a18900bb67adb8dc23c7a8b668edc7c75">m_angle</a>= angle;
<a name="l01487"></a>01487     }
<a name="l01488"></a>01488 
<a name="l01489"></a>01489     <span class="keyword">enum</span> 
<a name="l01490"></a>01490     {
<a name="l01491"></a><a class="code" href="classkl_rotate_functor.html#a7a7a3747bb88d93a463ab7c8ae8b5dc6aeac8e8917d2028aaffa9670c35bca1b4">01491</a>         IPPI_INTER_NN,<span class="comment">// Nearest neighbor interpolation.</span>
<a name="l01492"></a><a class="code" href="classkl_rotate_functor.html#a7a7a3747bb88d93a463ab7c8ae8b5dc6a758e1889f15092562b40eb8609205a5f">01492</a>         IPPI_INTER_LINEAR,<span class="comment">// Linear interpolation.</span>
<a name="l01493"></a><a class="code" href="classkl_rotate_functor.html#a7a7a3747bb88d93a463ab7c8ae8b5dc6aff4d8baebaf7d6e1101fdb358fdc8a26">01493</a>         IPPI_INTER_CUBIC,<span class="comment">// Cubic interpolation.</span>
<a name="l01494"></a><a class="code" href="classkl_rotate_functor.html#a7a7a3747bb88d93a463ab7c8ae8b5dc6adf142b0ab224bb615563877d3cbcb02e">01494</a>         IPPI_INTER_LANCZOS,<span class="comment">// Interpolation using 3-lobed Lanczos window function.</span>
<a name="l01495"></a><a class="code" href="classkl_rotate_functor.html#a7a7a3747bb88d93a463ab7c8ae8b5dc6a1b9bb0cb08728523db1c2a3d2514c28a">01495</a>         IPPI_INTER_SUPER,<span class="comment">// Supersampling interpolation.</span>
<a name="l01496"></a>01496     }<a class="code" href="classkl_rotate_functor.html#ae746dae587b7ff60911269f44edd49b0">RotateInterpolationFns</a>;
<a name="l01497"></a>01497 
<a name="l01498"></a><a class="code" href="classkl_rotate_functor.html#a363eca8f56465731311f2531499ddee0">01498</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_rotate_functor.html#a363eca8f56465731311f2531499ddee0">operator()</a>(<span class="keywordtype">void</span>)
<a name="l01499"></a>01499     {
<a name="l01500"></a>01500 
<a name="l01501"></a>01501         <span class="keywordflow">if</span>(<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;numBands() !=1 &amp;&amp; <a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;numBands()!=3)
<a name="l01502"></a>01502             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klRotateFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l01503"></a>01503 
<a name="l01504"></a>01504         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcbuf=<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;buffer();
<a name="l01505"></a>01505 
<a name="l01506"></a>01506         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* inbuf=<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;buffer();
<a name="l01507"></a>01507         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;numBands();
<a name="l01508"></a>01508         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;width();
<a name="l01509"></a>01509         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;height(); 
<a name="l01510"></a>01510         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;bandStride();
<a name="l01511"></a>01511         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;xStride();
<a name="l01512"></a>01512         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>-&gt;yStride();
<a name="l01513"></a>01513 
<a name="l01514"></a>01514         IppStatus  ippStatusResult;
<a name="l01515"></a>01515 
<a name="l01516"></a>01516         IppiSize dstRoiSize;
<a name="l01517"></a>01517 
<a name="l01518"></a>01518 
<a name="l01519"></a>01519         <span class="keywordtype">double</span> angle=<a class="code" href="classkl_rotate_functor.html#a18900bb67adb8dc23c7a8b668edc7c75">m_angle</a>;
<a name="l01520"></a>01520 
<a name="l01521"></a>01521         IppiSize srcSize;
<a name="l01522"></a>01522         srcSize.width=inwidth;
<a name="l01523"></a>01523         srcSize.height=inheight;
<a name="l01524"></a>01524         <span class="keywordtype">int</span> srcStep=inyStride;
<a name="l01525"></a>01525         IppiRect srcRoi;
<a name="l01526"></a>01526 
<a name="l01527"></a>01527         <span class="keywordtype">double</span> xShift=0;
<a name="l01528"></a>01528         <span class="keywordtype">double</span> yShift=0;
<a name="l01529"></a>01529         srcRoi.x=0; srcRoi.y=0; srcRoi.width=inwidth; srcRoi.height=inheight;
<a name="l01530"></a>01530         <span class="keywordtype">double</span> quad[4][2];
<a name="l01531"></a>01531         <span class="keywordtype">double</span> bound[2][2];
<a name="l01532"></a>01532         <span class="keywordtype">double</span> xCenterSrc = inwidth/2;
<a name="l01533"></a>01533         <span class="keywordtype">double</span> yCenterSrc = inheight/2;
<a name="l01534"></a>01534         <span class="keywordtype">double</span> w = inwidth; 
<a name="l01535"></a>01535         <span class="keywordtype">double</span> h= inheight;
<a name="l01536"></a>01536 
<a name="l01537"></a>01537         <span class="keywordtype">double</span> _pi=3.14159265358979323846264338327950288f;
<a name="l01538"></a>01538         <span class="keywordtype">double</span> theta=_pi * angle/180;
<a name="l01539"></a>01539 
<a name="l01540"></a>01540         <span class="comment">//bbcrevisit</span>
<a name="l01541"></a>01541         <span class="comment">//This is: inelegant, unrefined, without grace, lacking in good taste,</span>
<a name="l01542"></a>01542         <span class="comment">//amateur, crude, green, incompetent, ineffectual, inefficient, inexperienced, unpolished, unprofessional,</span>
<a name="l01543"></a>01543         <span class="comment">//unskilled, unskillful, careless, sloppy, tacky, tactless, undiplomatic,</span>
<a name="l01544"></a>01544         <span class="comment">//ill-advised, ineffective, ineffectual, misdirected, misguided,</span>
<a name="l01545"></a>01545         <span class="comment">//discomfiting, disconcerting, disturbing, embarrassing, flustering, uncomfortable,</span>
<a name="l01546"></a>01546         <span class="comment">//confusing, difficult, disagreeable, impossible, inconvenient, intolerable, troublesome, unpleasant, </span>
<a name="l01547"></a>01547         <span class="comment">//unwieldy, debasing, degrading, demeaning, humbling, humiliating, mortifying,</span>
<a name="l01548"></a>01548         <span class="comment">//clumsy, gauche, roughhewn, stiff, stilted, uncomfortable, uneasy, ungraceful, wooden.</span>
<a name="l01549"></a>01549 
<a name="l01550"></a>01550         <span class="comment">//It is also unused</span>
<a name="l01551"></a>01551         <span class="keywordtype">double</span> boo_boo_bummer[3][2];
<a name="l01552"></a>01552         boo_boo_bummer[0][0]=-h*sin(theta);                            boo_boo_bummer[0][1]=h*cos(theta);
<a name="l01553"></a>01553         boo_boo_bummer[1][0]=w*cos(theta)-h*sin(theta);                boo_boo_bummer[1][1]=h*cos(theta)+w*sin(theta);
<a name="l01554"></a>01554         boo_boo_bummer[2][0]=w*cos(theta);                             boo_boo_bummer[2][1]=w*sin(theta);
<a name="l01555"></a>01555         <span class="keywordtype">int</span> maxDim=0;
<a name="l01556"></a>01556         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> kl=0;
<a name="l01557"></a>01557         <span class="keywordflow">for</span>(kl=0;kl&lt;3;kl++)
<a name="l01558"></a>01558         {
<a name="l01559"></a>01559             <span class="keywordflow">if</span>(boo_boo_bummer[kl][0]&gt;maxDim)
<a name="l01560"></a>01560                 maxDim=boo_boo_bummer[kl][0];
<a name="l01561"></a>01561 
<a name="l01562"></a>01562             <span class="keywordflow">if</span>(boo_boo_bummer[kl][1]&gt;maxDim)
<a name="l01563"></a>01563                 maxDim=boo_boo_bummer[kl][1];
<a name="l01564"></a>01564         }
<a name="l01565"></a>01565 
<a name="l01566"></a>01566         IppiSize dstSize;
<a name="l01567"></a>01567         dstSize.width=max(inwidth,inheight);
<a name="l01568"></a>01568         dstSize.height=max(inwidth,inheight);
<a name="l01569"></a>01569         <span class="keywordtype">double</span> nw=dstSize.width;
<a name="l01570"></a>01570         <span class="keywordtype">double</span> nh=dstSize.height;
<a name="l01571"></a>01571         <span class="keywordtype">int</span> xOn=(nw-inwidth)/2;
<a name="l01572"></a>01572         <span class="keywordtype">int</span> yOn=(nh-inheight)/2;
<a name="l01573"></a>01573         <span class="keywordtype">double</span> xS=0;
<a name="l01574"></a>01574         <span class="keywordtype">double</span> yS=0;
<a name="l01575"></a>01575         ippiGetRotateShift ( inwidth/2, inheight/2, angle, &amp;xS, &amp;yS );
<a name="l01576"></a>01576         <span class="keywordflow">if</span>(xOn&gt;0)
<a name="l01577"></a>01577             xS+= xOn;
<a name="l01578"></a>01578         <span class="keywordflow">if</span>(yOn&gt;0)
<a name="l01579"></a>01579             yS+=yOn;
<a name="l01580"></a>01580 
<a name="l01581"></a>01581         xShift=xS;
<a name="l01582"></a>01582         yShift=yS;
<a name="l01583"></a>01583 
<a name="l01584"></a>01584         <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> dst=<span class="keyword">new</span> <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;TYPE&gt;</a>(dstSize.width,dstSize.height, inbands);        
<a name="l01585"></a>01585         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* pDst=dst-&gt;buffer();
<a name="l01586"></a>01586         <span class="keywordtype">int</span> dstStep=dst-&gt;yStride();
<a name="l01587"></a>01587         IppiRect dstRoi;
<a name="l01588"></a>01588         dstRoi.x=0; dstRoi.y=0; dstRoi.width=dst-&gt;width(); dstRoi.height=dst-&gt;height();
<a name="l01589"></a>01589         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l01590"></a>01590 
<a name="l01591"></a>01591         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l01592"></a>01592         {
<a name="l01593"></a>01593             <span class="keywordflow">switch</span>(inbands)
<a name="l01594"></a>01594             {
<a name="l01595"></a>01595             <span class="keywordflow">case</span>(1):
<a name="l01596"></a>01596                 {
<a name="l01597"></a>01597                     ippStatusResult = ippiSet_32f_C1R(1.0f, (<span class="keywordtype">float</span>*)pDst, dstStep,  dstSize);
<a name="l01598"></a>01598                     ippStatusResult=  ippiRotate_32f_C1R((<span class="keywordtype">float</span>*) inbuf, srcSize, srcStep,  srcRoi, (<span class="keywordtype">float</span>*) pDst, 
<a name="l01599"></a>01599                         dstStep,  dstRoi, angle,  xShift,  yShift,  <a class="code" href="classkl_rotate_functor.html#a975f1dbc8dd8888bf191caf090b6f5af">m_interpolate</a>);
<a name="l01600"></a>01600                     <span class="keywordflow">break</span>;
<a name="l01601"></a>01601                 }
<a name="l01602"></a>01602             <span class="keywordflow">case</span>(3):
<a name="l01603"></a>01603                 {
<a name="l01604"></a>01604                     <span class="keywordtype">float</span>  bkgndcol[3];bkgndcol[0]=1.0f;bkgndcol[1]=1.0f;bkgndcol[2]=1.0f;
<a name="l01605"></a>01605                     ippStatusResult = ippiSet_32f_C3R(bkgndcol, (<span class="keywordtype">float</span>*)pDst, dstStep,  dstSize);
<a name="l01606"></a>01606                     ippStatusResult=  ippiRotate_32f_C3R((<span class="keywordtype">float</span>*) inbuf, srcSize, srcStep,  srcRoi, (<span class="keywordtype">float</span>*) pDst, 
<a name="l01607"></a>01607                         dstStep,  dstRoi, angle,  xShift,  yShift,  <a class="code" href="classkl_rotate_functor.html#a975f1dbc8dd8888bf191caf090b6f5af">m_interpolate</a>);
<a name="l01608"></a>01608                     <span class="keywordflow">break</span>;
<a name="l01609"></a>01609 
<a name="l01610"></a>01610                 }
<a name="l01611"></a>01611             }<span class="comment">//end switch inbands</span>
<a name="l01612"></a>01612         }<span class="comment">//end float case</span>
<a name="l01613"></a>01613         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>))
<a name="l01614"></a>01614         {
<a name="l01615"></a>01615             <span class="keywordflow">switch</span>(inbands)
<a name="l01616"></a>01616             {
<a name="l01617"></a>01617             <span class="keywordflow">case</span>(1):
<a name="l01618"></a>01618                 {
<a name="l01619"></a>01619                     <span class="comment">//unsigned char  bkgndcol[3];bkgndcol[0]=255;bkgndcol[1]=255;bkgndcol[2]=255;</span>
<a name="l01620"></a>01620                     ippStatusResult = ippiSet_8u_C1R(255, pDst, dstStep,  dstSize);
<a name="l01621"></a>01621 
<a name="l01622"></a>01622                     ippStatusResult=  ippiRotate_8u_C1R((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) inbuf, srcSize, srcStep,  srcRoi, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) pDst, 
<a name="l01623"></a>01623                         dstStep,  dstRoi, angle,  xShift,  yShift,  <a class="code" href="classkl_rotate_functor.html#a975f1dbc8dd8888bf191caf090b6f5af">m_interpolate</a>);
<a name="l01624"></a>01624 
<a name="l01625"></a>01625                     <span class="keywordflow">break</span>;
<a name="l01626"></a>01626                 }
<a name="l01627"></a>01627             <span class="keywordflow">case</span>(3):
<a name="l01628"></a>01628                 {
<a name="l01629"></a>01629                     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>  bkgndcol[3];bkgndcol[0]=255;bkgndcol[1]=255;bkgndcol[2]=255;
<a name="l01630"></a>01630                     ippStatusResult = ippiSet_8u_C3R(bkgndcol, pDst, dstStep,  dstSize);
<a name="l01631"></a>01631                     ippStatusResult=  ippiRotate_8u_C3R((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) inbuf, srcSize, srcStep,  srcRoi, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) pDst, 
<a name="l01632"></a>01632                         dstStep,  dstRoi, angle,  xShift,  yShift,  <a class="code" href="classkl_rotate_functor.html#a975f1dbc8dd8888bf191caf090b6f5af">m_interpolate</a>);
<a name="l01633"></a>01633 
<a name="l01634"></a>01634                     <span class="keywordflow">break</span>;
<a name="l01635"></a>01635                 }
<a name="l01636"></a>01636 
<a name="l01637"></a>01637             }<span class="comment">//end switch inbands</span>
<a name="l01638"></a>01638             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01639"></a>01639             {
<a name="l01640"></a>01640                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;: klRotateFunctor : ipp status error in rotate routine.&quot;</span>;
<a name="l01641"></a>01641             }
<a name="l01642"></a>01642         }<span class="comment">//end unsigned char case</span>
<a name="l01643"></a>01643         <span class="keywordflow">else</span>
<a name="l01644"></a>01644             <span class="keywordflow">throw</span> <span class="stringliteral">&quot; : klRotateFunctor : unsupported data type, float and unsigned int supported at this time.&quot;</span>;
<a name="l01645"></a>01645         <span class="keywordflow">return</span> dst;
<a name="l01646"></a>01646 
<a name="l01647"></a>01647     }<span class="comment">//end operator() </span>
<a name="l01648"></a>01648 
<a name="l01649"></a><a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">01649</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_rotate_functor.html#add306b67520f0c9a43aac836c10a181d">m_src</a>;
<a name="l01650"></a><a class="code" href="classkl_rotate_functor.html#a18900bb67adb8dc23c7a8b668edc7c75">01650</a>     <span class="keywordtype">double</span> <a class="code" href="classkl_rotate_functor.html#a18900bb67adb8dc23c7a8b668edc7c75">m_angle</a>;
<a name="l01651"></a><a class="code" href="classkl_rotate_functor.html#a975f1dbc8dd8888bf191caf090b6f5af">01651</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_rotate_functor.html#a975f1dbc8dd8888bf191caf090b6f5af">m_interpolate</a>;
<a name="l01652"></a>01652 };
<a name="l01653"></a>01653 
<a name="l01654"></a>01654 
<a name="l01655"></a><a class="code" href="classkl_copy_r_o_i_functor.html">01655</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> TYPE&gt; <span class="keyword">class </span><a class="code" href="classkl_copy_r_o_i_functor.html">klCopyROIFunctor</a>{
<a name="l01656"></a>01656 <span class="keyword">public</span>:
<a name="l01657"></a>01657 
<a name="l01658"></a><a class="code" href="classkl_copy_r_o_i_functor.html#a56f8ec7c1f3d002add116212e10b7875">01658</a>     <a class="code" href="classkl_copy_r_o_i_functor.html#a56f8ec7c1f3d002add116212e10b7875">klCopyROIFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst, <a class="code" href="classkl_rect.html">klRect</a> iRoi,<a class="code" href="classkl_rect.html">klRect</a> oRoi)
<a name="l01659"></a>01659         : <a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>(lsrc), <a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>(ldst), <a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>(iRoi),<a class="code" href="classkl_copy_r_o_i_functor.html#af733c6d7fad40afab94abda46939e4af">m_oRoi</a>(oRoi)
<a name="l01660"></a>01660     {
<a name="l01661"></a>01661 
<a name="l01662"></a>01662     }
<a name="l01663"></a><a class="code" href="classkl_copy_r_o_i_functor.html#a495ac8dd39a9252737c62acf41020984">01663</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_copy_r_o_i_functor.html#a495ac8dd39a9252737c62acf41020984">operator()</a>(<span class="keywordtype">void</span>)
<a name="l01664"></a>01664     {
<a name="l01665"></a>01665         <span class="keywordflow">if</span>(<a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#a5756accaacd4af564def996d7a8b49d3">w</a>!=<a class="code" href="classkl_copy_r_o_i_functor.html#af733c6d7fad40afab94abda46939e4af">m_oRoi</a>.<a class="code" href="classkl_rect.html#a5756accaacd4af564def996d7a8b49d3">w</a> || <a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#aa8e45610362d5d6587014cf21714278b">h</a>!=<a class="code" href="classkl_copy_r_o_i_functor.html#af733c6d7fad40afab94abda46939e4af">m_oRoi</a>.<a class="code" href="classkl_rect.html#aa8e45610362d5d6587014cf21714278b">h</a>)
<a name="l01666"></a>01666             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;Input ROI extent not same as output ROI extent in klCopyFunctor.&quot;</span>;
<a name="l01667"></a>01667 
<a name="l01668"></a>01668         <span class="keywordflow">if</span>(<a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#a53d1f64154e99b99b12efb9059625e50">x</a> &lt;0 || <a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#a75f43649d3a344eed165b875ef861185">y</a>&lt;0)
<a name="l01669"></a>01669             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;Input ROI outside input image in klCopyROIFunctor&quot;</span>;
<a name="l01670"></a>01670 
<a name="l01671"></a>01671         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>-&gt;numBands();
<a name="l01672"></a>01672         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>-&gt;width();
<a name="l01673"></a>01673         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>-&gt;height(); 
<a name="l01674"></a>01674         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>-&gt;bandStride();
<a name="l01675"></a>01675         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>-&gt;xStride();
<a name="l01676"></a>01676         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>-&gt;yStride();
<a name="l01677"></a>01677 
<a name="l01678"></a>01678         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>-&gt;numBands();
<a name="l01679"></a>01679         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>-&gt;width();
<a name="l01680"></a>01680         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>-&gt;height(); 
<a name="l01681"></a>01681         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>-&gt;bandStride();
<a name="l01682"></a>01682         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>-&gt;xStride();
<a name="l01683"></a>01683         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>-&gt;yStride();
<a name="l01684"></a>01684 
<a name="l01685"></a>01685         <span class="keywordflow">if</span>(inbands!=outbands)
<a name="l01686"></a>01686             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klCopyROIFunctor: invalid bands specified.&quot;</span>;
<a name="l01687"></a>01687 
<a name="l01688"></a>01688         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l01689"></a>01689         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;
<a name="l01690"></a>01690         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b;
<a name="l01691"></a>01691 
<a name="l01692"></a>01692         TYPE* inbuf=(TYPE*)<a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>-&gt;buffer();
<a name="l01693"></a>01693 
<a name="l01694"></a>01694         TYPE* outbuf=(TYPE*)<a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>-&gt;buffer();
<a name="l01695"></a>01695 
<a name="l01696"></a>01696         <span class="keywordtype">unsigned</span> typeSize=<span class="keyword">sizeof</span>(TYPE);
<a name="l01697"></a>01697 
<a name="l01698"></a>01698         <span class="keywordtype">int</span> srcStep=inyStride;
<a name="l01699"></a>01699         <span class="keywordtype">int</span> dstStep=outyStride;
<a name="l01700"></a>01700 
<a name="l01701"></a>01701         TYPE* pDst=inbuf+ <a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#a75f43649d3a344eed165b875ef861185">y</a>  * inyStride + <a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#a53d1f64154e99b99b12efb9059625e50">x</a> * inxStride;
<a name="l01702"></a>01702         TYPE* pSrc=outbuf+ <a class="code" href="classkl_copy_r_o_i_functor.html#af733c6d7fad40afab94abda46939e4af">m_oRoi</a>.<a class="code" href="classkl_rect.html#a75f43649d3a344eed165b875ef861185">y</a> * outyStride + <a class="code" href="classkl_copy_r_o_i_functor.html#af733c6d7fad40afab94abda46939e4af">m_oRoi</a>.<a class="code" href="classkl_rect.html#a53d1f64154e99b99b12efb9059625e50">x</a> * outxStride;
<a name="l01703"></a>01703 
<a name="l01704"></a>01704         IppiSize roiSize;
<a name="l01705"></a>01705         roiSize.width=<a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#a5756accaacd4af564def996d7a8b49d3">w</a>;
<a name="l01706"></a>01706         roiSize.height=<a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>.<a class="code" href="classkl_rect.html#aa8e45610362d5d6587014cf21714278b">h</a>;
<a name="l01707"></a>01707 
<a name="l01708"></a>01708         IppStatus  ippStatusResult;
<a name="l01709"></a>01709 
<a name="l01710"></a>01710         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l01711"></a>01711         {<span class="comment">//IPP- convention bbcrevisit souce and dst are reversed in name - this really has to be sorted out so variable names are consistent!</span>
<a name="l01712"></a>01712             <span class="keywordflow">switch</span>(inbands)
<a name="l01713"></a>01713             {
<a name="l01714"></a>01714             <span class="keywordflow">case</span>(1):
<a name="l01715"></a>01715                 {
<a name="l01716"></a>01716                     ippStatusResult= ippiCopy_32f_C1R((<span class="keywordtype">float</span>*)pSrc, dstStep,(<span class="keywordtype">float</span>*)pDst ,srcStep , roiSize);
<a name="l01717"></a>01717                     <span class="keywordflow">break</span>;
<a name="l01718"></a>01718                 }
<a name="l01719"></a>01719             <span class="keywordflow">case</span>(3):
<a name="l01720"></a>01720                 {
<a name="l01721"></a>01721                     ippStatusResult= ippiCopy_32f_C3R((<span class="keywordtype">float</span>*)pSrc, dstStep,(<span class="keywordtype">float</span>*)pDst ,srcStep , roiSize);
<a name="l01722"></a>01722                     <span class="keywordflow">break</span>;
<a name="l01723"></a>01723                 }
<a name="l01724"></a>01724             }<span class="comment">//end switch inbands</span>
<a name="l01725"></a>01725         }<span class="comment">//end float case</span>
<a name="l01726"></a>01726         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>))
<a name="l01727"></a>01727         {
<a name="l01728"></a>01728             <span class="keywordflow">switch</span>(inbands)
<a name="l01729"></a>01729             {
<a name="l01730"></a>01730             <span class="keywordflow">case</span>(1):
<a name="l01731"></a>01731                 {
<a name="l01732"></a>01732                     ippStatusResult= ippiCopy_8u_C1R((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)pSrc, dstStep,(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)pDst ,srcStep , roiSize);
<a name="l01733"></a>01733                     <span class="keywordflow">break</span>;
<a name="l01734"></a>01734                 }
<a name="l01735"></a>01735             <span class="keywordflow">case</span>(3):
<a name="l01736"></a>01736                 {
<a name="l01737"></a>01737                     ippStatusResult= ippiCopy_8u_C3R((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)pSrc, dstStep,(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)pDst ,srcStep , roiSize);
<a name="l01738"></a>01738                     <span class="keywordflow">break</span>;
<a name="l01739"></a>01739                 }
<a name="l01740"></a>01740 
<a name="l01741"></a>01741             }<span class="comment">//end switch inbands</span>
<a name="l01742"></a>01742         }
<a name="l01743"></a>01743         <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01744"></a>01744         {
<a name="l01745"></a>01745             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klCopyROIFunctor : ipp status error in copy routine.&quot;</span>;
<a name="l01746"></a>01746         }
<a name="l01747"></a>01747     }
<a name="l01748"></a>01748 
<a name="l01749"></a><a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">01749</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_copy_r_o_i_functor.html#a32bce4a1ae3641a8dccaa125f9e8c5e8">src</a>;
<a name="l01750"></a>01750 
<a name="l01751"></a><a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">01751</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_copy_r_o_i_functor.html#a00c0709a732f586a55d9e03755441598">dst</a>;
<a name="l01752"></a>01752 
<a name="l01753"></a><a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">01753</a>     <a class="code" href="classkl_rect.html">klRect</a> <a class="code" href="classkl_copy_r_o_i_functor.html#ab286cd3c8b9d4b79c4ebf5190c191fc8">m_iRoi</a>;
<a name="l01754"></a>01754 
<a name="l01755"></a><a class="code" href="classkl_copy_r_o_i_functor.html#af733c6d7fad40afab94abda46939e4af">01755</a>     <a class="code" href="classkl_rect.html">klRect</a> <a class="code" href="classkl_copy_r_o_i_functor.html#af733c6d7fad40afab94abda46939e4af">m_oRoi</a>;
<a name="l01756"></a>01756 
<a name="l01757"></a>01757 };
<a name="l01758"></a>01758 
<a name="l01759"></a>01759 <span class="comment">//Y = 0.299 * R + 0.587 * G + 0.114 * B</span>
<a name="l01760"></a><a class="code" href="classkl_color_to_gray_functor.html">01760</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_color_to_gray_functor.html">klColorToGrayFunctor</a>
<a name="l01761"></a>01761 {
<a name="l01762"></a>01762 <span class="keyword">public</span>:
<a name="l01763"></a><a class="code" href="classkl_color_to_gray_functor.html#a1255d50800315fd85faa34ca60f76a40">01763</a>     <a class="code" href="classkl_color_to_gray_functor.html#a1255d50800315fd85faa34ca60f76a40">klColorToGrayFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst)
<a name="l01764"></a>01764         : <a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>(lsrc), <a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>(ldst)
<a name="l01765"></a>01765     {
<a name="l01766"></a>01766 
<a name="l01767"></a>01767     }
<a name="l01768"></a>01768 
<a name="l01769"></a><a class="code" href="classkl_color_to_gray_functor.html#a9d4b1c7cb4a6e7fa0c724c34a39c385d">01769</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_color_to_gray_functor.html#a9d4b1c7cb4a6e7fa0c724c34a39c385d">operator()</a>(<span class="keywordtype">void</span>)
<a name="l01770"></a>01770     {
<a name="l01771"></a>01771         <span class="keywordflow">if</span>(<a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;numBands() !=3 &amp;&amp; <a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;numBands()!=1)
<a name="l01772"></a>01772             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klColorToGrayFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l01773"></a>01773 
<a name="l01774"></a>01774         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* outbuf=<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;buffer();
<a name="l01775"></a>01775         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;numBands();
<a name="l01776"></a>01776         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;width();
<a name="l01777"></a>01777         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;height(); 
<a name="l01778"></a>01778         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;bandStride();
<a name="l01779"></a>01779         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;xStride();
<a name="l01780"></a>01780         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;yStride();
<a name="l01781"></a>01781 
<a name="l01782"></a>01782         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcbuf=<a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;buffer();
<a name="l01783"></a>01783         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;numBands();
<a name="l01784"></a>01784         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;width();
<a name="l01785"></a>01785         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;height(); 
<a name="l01786"></a>01786         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;bandStride();
<a name="l01787"></a>01787         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;xStride();
<a name="l01788"></a>01788         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>-&gt;yStride();
<a name="l01789"></a>01789 
<a name="l01790"></a>01790         IppStatus  ippStatusResult;
<a name="l01791"></a>01791         IppiSize dstRoiSize;        
<a name="l01792"></a>01792         dstRoiSize.width=<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;width();
<a name="l01793"></a>01793         dstRoiSize.height=<a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>-&gt;height();
<a name="l01794"></a>01794 
<a name="l01795"></a>01795         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l01796"></a>01796         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l01797"></a>01797         {           ippStatusResult= ippiRGBToGray_32f_C3C1R((<span class="keywordtype">float</span>*)srcbuf, inyStride,
<a name="l01798"></a>01798         (<span class="keywordtype">float</span>*)outbuf, outyStride, dstRoiSize);
<a name="l01799"></a>01799 
<a name="l01800"></a>01800         <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01801"></a>01801             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klColorToGrayFunctor : ipp status error in Erode routine.&quot;</span>;
<a name="l01802"></a>01802         }<span class="comment">//end float case</span>
<a name="l01803"></a>01803         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>))
<a name="l01804"></a>01804         {   
<a name="l01805"></a>01805             ippStatusResult=ippiRGBToGray_8u_C3C1R(srcbuf, inyStride,
<a name="l01806"></a>01806                 outbuf, outyStride, dstRoiSize);
<a name="l01807"></a>01807             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01808"></a>01808                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klColorToGrayFunctor : ipp status error in Erode routine.&quot;</span>;
<a name="l01809"></a>01809 
<a name="l01810"></a>01810         }<span class="comment">//end unsigned char case</span>
<a name="l01811"></a>01811         <span class="keywordflow">else</span>
<a name="l01812"></a>01812             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klColorToGrayFunctor : unsupported data type, float and unsigned int supported at this time.&quot;</span>;
<a name="l01813"></a>01813 
<a name="l01814"></a>01814     }<span class="comment">//end operator() </span>
<a name="l01815"></a>01815 
<a name="l01816"></a><a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">01816</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_color_to_gray_functor.html#ac0f7460b8db115cf4db3db8f39b9aa9a">src</a>;
<a name="l01817"></a><a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">01817</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_color_to_gray_functor.html#a13fc414e2643b3209f44a6f161e23844">dst</a>;
<a name="l01818"></a>01818 };
<a name="l01819"></a>01819 
<a name="l01820"></a><a class="code" href="classkl_copy_split_band_functor.html">01820</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> TYPE&gt; <span class="keyword">class </span><a class="code" href="classkl_copy_split_band_functor.html">klCopySplitBandFunctor</a>{
<a name="l01821"></a>01821 <span class="keyword">public</span>:
<a name="l01822"></a>01822 
<a name="l01823"></a>01823     <span class="comment">//Split 3 channel pixel interleaved to band interleaved.</span>
<a name="l01824"></a><a class="code" href="classkl_copy_split_band_functor.html#a536c04f66c02e805cafa3d74be86634f">01824</a>     <a class="code" href="classkl_copy_split_band_functor.html#a536c04f66c02e805cafa3d74be86634f">klCopySplitBandFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst)
<a name="l01825"></a>01825         : <a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>(lsrc), <a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>(ldst)
<a name="l01826"></a>01826     {
<a name="l01827"></a>01827 
<a name="l01828"></a>01828     }
<a name="l01829"></a><a class="code" href="classkl_copy_split_band_functor.html#afc43b05227b2796f10c05652ddc6e5b9">01829</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_copy_split_band_functor.html#afc43b05227b2796f10c05652ddc6e5b9">operator()</a>(<span class="keywordtype">void</span>)
<a name="l01830"></a>01830     {
<a name="l01831"></a>01831         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;numBands();
<a name="l01832"></a>01832         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;width();
<a name="l01833"></a>01833         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;height(); 
<a name="l01834"></a>01834         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;bandStride();
<a name="l01835"></a>01835         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;xStride();
<a name="l01836"></a>01836         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;yStride();
<a name="l01837"></a>01837 
<a name="l01838"></a>01838         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;numBands();
<a name="l01839"></a>01839         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;width();
<a name="l01840"></a>01840         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;height(); 
<a name="l01841"></a>01841         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;bandStride();
<a name="l01842"></a>01842         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;xStride();
<a name="l01843"></a>01843         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;yStride();
<a name="l01844"></a>01844 
<a name="l01845"></a>01845         <span class="keywordflow">if</span>(inwidth!=outwidth || inheight != outheight ||inbands!=outbands ||inbands !=3 )
<a name="l01846"></a>01846             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klCopySplitBandFunctor : in and out  dimensions must be the same&quot;</span>;
<a name="l01847"></a>01847 
<a name="l01848"></a>01848         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l01849"></a>01849         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j;
<a name="l01850"></a>01850         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> b;
<a name="l01851"></a>01851 
<a name="l01852"></a>01852         TYPE* inbuf=(TYPE*)<a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;buffer();
<a name="l01853"></a>01853 
<a name="l01854"></a>01854         TYPE* outbuf=(TYPE*)<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;buffer();
<a name="l01855"></a>01855 
<a name="l01856"></a>01856         <span class="keywordtype">unsigned</span> typeSize=<span class="keyword">sizeof</span>(TYPE);
<a name="l01857"></a>01857 
<a name="l01858"></a>01858         <span class="keywordtype">int</span> srcStep=inyStride;
<a name="l01859"></a>01859         <span class="keywordtype">int</span> dstStep=outyStride;
<a name="l01860"></a>01860 
<a name="l01861"></a>01861         IppiSize roiSize;
<a name="l01862"></a>01862         roiSize.width=inwidth;
<a name="l01863"></a>01863         roiSize.height=inheight;
<a name="l01864"></a>01864 
<a name="l01865"></a>01865         IppStatus  ippStatusResult;
<a name="l01866"></a>01866 
<a name="l01867"></a>01867         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(float))
<a name="l01868"></a>01868         {
<a name="l01869"></a>01869             Ipp32f* pDstPlanePtr[3];
<a name="l01870"></a>01870             pDstPlanePtr[0]=(<span class="keywordtype">float</span>*)<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;buffer();
<a name="l01871"></a>01871             pDstPlanePtr[1]=(<span class="keywordtype">float</span>*)(<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;buffer()+ outheight * outyStride);
<a name="l01872"></a>01872             pDstPlanePtr[2]=(<span class="keywordtype">float</span>*)(<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;buffer()+ (2 * outheight* outyStride));
<a name="l01873"></a>01873 
<a name="l01874"></a>01874             ippStatusResult=  ippiCopy_32f_C3P3R((<span class="keywordtype">float</span>*) <a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;buffer(),  inyStride,pDstPlanePtr,  srcStep,  roiSize);
<a name="l01875"></a>01875 
<a name="l01876"></a>01876         }<span class="comment">//end float case</span>
<a name="l01877"></a>01877         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char))
<a name="l01878"></a>01878         {
<a name="l01879"></a>01879             Ipp8u* pDstPlanePtr[3];
<a name="l01880"></a>01880             pDstPlanePtr[0]=<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;buffer();
<a name="l01881"></a>01881             pDstPlanePtr[1]=<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;buffer()+ outheight * outyStride/3;
<a name="l01882"></a>01882             pDstPlanePtr[2]=<a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>-&gt;buffer()+ (2 * outheight* outyStride/3);
<a name="l01883"></a>01883             <span class="keywordtype">int</span> psb;
<a name="l01884"></a>01884             Ipp8u* shift[3];
<a name="l01885"></a>01885             shift[0]=ippiMalloc_8u_C1(outwidth,outheight,&amp;psb); 
<a name="l01886"></a>01886             shift[1]=ippiMalloc_8u_C1(outwidth,outheight,&amp;psb);
<a name="l01887"></a>01887             shift[2]=ippiMalloc_8u_C1(outwidth,outheight,&amp;psb);
<a name="l01888"></a>01888 
<a name="l01889"></a>01889             ippStatusResult=  ippiCopy_8u_C3P3R((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) <a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>-&gt;buffer(),  inyStride,pDstPlanePtr,  outyStride/3,  roiSize);<span class="comment">//ippiCopy_8u_C3P3R((unsigned char*) src-&gt;buffer(),  inyStride,shift,  psb,  roiSize);</span>
<a name="l01890"></a>01890 
<a name="l01891"></a>01891         }
<a name="l01892"></a>01892         <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01893"></a>01893         {
<a name="l01894"></a>01894             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klCopyROIFunctor : ipp status error in copy routine.&quot;</span>;
<a name="l01895"></a>01895         }
<a name="l01896"></a>01896     }
<a name="l01897"></a>01897 
<a name="l01898"></a><a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">01898</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_copy_split_band_functor.html#af4f51f007e2757a790e28613a5cfd671">src</a>;
<a name="l01899"></a>01899 
<a name="l01900"></a><a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">01900</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_copy_split_band_functor.html#a310803baf6ec20b92d23464b75dfdecf">dst</a>;
<a name="l01901"></a>01901 
<a name="l01902"></a>01902 };
<a name="l01903"></a>01903 
<a name="l01904"></a>01904 
<a name="l01905"></a><a class="code" href="classkl_dithering_functor.html">01905</a> <span class="keyword">template</span>&lt; <span class="keyword">class</span> TYPE &gt; <span class="keyword">class </span><a class="code" href="classkl_dithering_functor.html">klDitheringFunctor</a>
<a name="l01906"></a>01906 {
<a name="l01907"></a>01907 <span class="keyword">public</span>:
<a name="l01908"></a>01908 
<a name="l01909"></a>01909     <span class="comment">//This parameter is set as a percentage of range [0..100].</span>
<a name="l01910"></a><a class="code" href="classkl_dithering_functor.html#aac31588a081313bf93f814dccdb2d362">01910</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_dithering_functor.html#aac31588a081313bf93f814dccdb2d362">noise</a>;
<a name="l01911"></a>01911         
<a name="l01912"></a><a class="code" href="classkl_dithering_functor.html#a5f4a7b22a3626ac1bc84625328645e27">01912</a>     IppiDitherType <a class="code" href="classkl_dithering_functor.html#a5f4a7b22a3626ac1bc84625328645e27">dtype</a>;
<a name="l01913"></a>01913 
<a name="l01914"></a>01914     <span class="comment">//The number of output levels for halftoning (dithering); can be varied in the range [2..(1&lt;&lt; depth)], where depth is the bit depth of the destination image.</span>
<a name="l01915"></a><a class="code" href="classkl_dithering_functor.html#a415d5c4a9bf288b62d80a4c156ce4fc6">01915</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_dithering_functor.html#a415d5c4a9bf288b62d80a4c156ce4fc6">levels</a>;
<a name="l01916"></a>01916     
<a name="l01917"></a>01917 
<a name="l01918"></a><a class="code" href="classkl_dithering_functor.html#a86b5b4837ea132b782ee6b9e07da4943">01918</a>     <a class="code" href="classkl_dithering_functor.html#a86b5b4837ea132b782ee6b9e07da4943">klDitheringFunctor</a>(<a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> lsrc, <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> ldst,<span class="keywordtype">int</span> Levels =2, IppiDitherType dithertype = IppiDitherType::ippDitherFS,<span class="keywordtype">int</span> Noise =5)
<a name="l01919"></a>01919         : <a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>(lsrc), <a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>(ldst)
<a name="l01920"></a>01920     {
<a name="l01921"></a>01921         <a class="code" href="classkl_dithering_functor.html#aac31588a081313bf93f814dccdb2d362">noise</a> =Noise;
<a name="l01922"></a>01922         <a class="code" href="classkl_dithering_functor.html#a5f4a7b22a3626ac1bc84625328645e27">dtype</a> = dithertype;<span class="comment">//IppiDitherType::ippDitherFS;</span>
<a name="l01923"></a>01923         <a class="code" href="classkl_dithering_functor.html#a415d5c4a9bf288b62d80a4c156ce4fc6">levels</a> =Levels;
<a name="l01924"></a>01924     }
<a name="l01925"></a>01925 
<a name="l01926"></a><a class="code" href="classkl_dithering_functor.html#aeb8936d0f3fde2ed3a5b0cbe7bbd62db">01926</a>     <span class="keywordtype">void</span> <a class="code" href="classkl_dithering_functor.html#aeb8936d0f3fde2ed3a5b0cbe7bbd62db">operator()</a>(<span class="keywordtype">void</span>)
<a name="l01927"></a>01927     {
<a name="l01928"></a>01928         <span class="keywordflow">if</span>(<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;numBands() !=3 &amp;&amp; <a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;numBands()!=1)
<a name="l01929"></a>01929             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klDitheringFunctor : bad number of bands, onle one and three band images supported at this time.&quot;</span>;
<a name="l01930"></a>01930 
<a name="l01931"></a>01931         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* outbuf=<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;buffer();
<a name="l01932"></a>01932         <span class="keywordtype">size_t</span> outbands=<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;numBands();
<a name="l01933"></a>01933         <span class="keywordtype">size_t</span> outwidth =<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;width();
<a name="l01934"></a>01934         <span class="keywordtype">size_t</span> outheight=<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;height(); 
<a name="l01935"></a>01935         <span class="keywordtype">size_t</span> outbandStride=<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;bandStride();
<a name="l01936"></a>01936         <span class="keywordtype">size_t</span> outxStride =<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;xStride();
<a name="l01937"></a>01937         <span class="keywordtype">size_t</span> outyStride= <a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;yStride();
<a name="l01938"></a>01938 
<a name="l01939"></a>01939         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* srcbuf=<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;buffer();
<a name="l01940"></a>01940         <span class="keywordtype">size_t</span> inbands=<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;numBands();
<a name="l01941"></a>01941         <span class="keywordtype">size_t</span> inwidth =<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;width();
<a name="l01942"></a>01942         <span class="keywordtype">size_t</span> inheight=<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;height(); 
<a name="l01943"></a>01943         <span class="keywordtype">size_t</span> inbandStride=<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;bandStride();
<a name="l01944"></a>01944         <span class="keywordtype">size_t</span> inxStride =<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;xStride();
<a name="l01945"></a>01945         <span class="keywordtype">size_t</span> inyStride= <a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;yStride();
<a name="l01946"></a>01946 
<a name="l01947"></a>01947         IppStatus  ippStatusResult;
<a name="l01948"></a>01948         IppiSize dstRoiSize;        
<a name="l01949"></a>01949         dstRoiSize.width=<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;width();
<a name="l01950"></a>01950         dstRoiSize.height=<a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>-&gt;height();
<a name="l01951"></a>01951 
<a name="l01952"></a>01952         <span class="keyword">const</span> type_info&amp; typeof=<span class="keyword">typeid</span>(TYPE);
<a name="l01953"></a>01953         
<a name="l01954"></a>01954         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)==<span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char))
<a name="l01955"></a>01955         {   
<a name="l01956"></a>01956             <span class="keywordflow">if</span>(<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;numBands() ==3)
<a name="l01957"></a>01957             {
<a name="l01958"></a>01958                 IppStatus ippStatusResult= ippiReduceBits_8u_C3R(srcbuf, inyStride, outbuf, outyStride, dstRoiSize, <a class="code" href="classkl_dithering_functor.html#aac31588a081313bf93f814dccdb2d362">noise</a>,  <a class="code" href="classkl_dithering_functor.html#a5f4a7b22a3626ac1bc84625328645e27">dtype</a>, <a class="code" href="classkl_dithering_functor.html#a415d5c4a9bf288b62d80a4c156ce4fc6">levels</a>);
<a name="l01959"></a>01959             }
<a name="l01960"></a>01960 
<a name="l01961"></a>01961             <span class="keywordflow">if</span>(<a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>-&gt;numBands() ==1)
<a name="l01962"></a>01962             {
<a name="l01963"></a>01963                 IppStatus ippStatusResult= ippiReduceBits_8u_C1R(srcbuf, inyStride, outbuf, outyStride, dstRoiSize, <a class="code" href="classkl_dithering_functor.html#aac31588a081313bf93f814dccdb2d362">noise</a>,  <a class="code" href="classkl_dithering_functor.html#a5f4a7b22a3626ac1bc84625328645e27">dtype</a>, <a class="code" href="classkl_dithering_functor.html#a415d5c4a9bf288b62d80a4c156ce4fc6">levels</a>);
<a name="l01964"></a>01964             }
<a name="l01965"></a>01965 
<a name="l01966"></a>01966 
<a name="l01967"></a>01967 
<a name="l01968"></a>01968             <span class="keywordflow">if</span>(ippStatusResult != ippStsNoErr)
<a name="l01969"></a>01969                 <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klDitheringFunctor : ipp status error in routine.&quot;</span>;
<a name="l01970"></a>01970 
<a name="l01971"></a>01971         }<span class="comment">//end unsigned char case</span>
<a name="l01972"></a>01972         <span class="keywordflow">else</span>
<a name="l01973"></a>01973             <span class="keywordflow">throw</span> <span class="stringliteral">&quot;klDitheringFunctor : unsupported data type, unsigned int supported at this time.&quot;</span>;
<a name="l01974"></a>01974 
<a name="l01975"></a>01975     }<span class="comment">//end operator() </span>
<a name="l01976"></a>01976 
<a name="l01977"></a><a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">01977</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_dithering_functor.html#a9e01a55738a23a1c62cc1db7a1737ed6">src</a>;
<a name="l01978"></a><a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">01978</a>     <a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">klRasterBufferPointer</a> <a class="code" href="classkl_dithering_functor.html#a02f6d7cc06174b872a1b13d407be6ef9">dst</a>;
<a name="l01979"></a>01979 };
<a name="l01980"></a>01980 
<a name="l01981"></a>01981 
<a name="l01982"></a>01982 
<a name="l01983"></a>01983 
<a name="l01984"></a>01984 
<a name="l01985"></a>01985 <span class="preprocessor">#endif //KL_IMAGE_FUNCTOR_H</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 21 2014 10:04:36 for klImageCore by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
